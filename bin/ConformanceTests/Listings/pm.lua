--[====[Generated by CreateTests.lua]====]
return function()
	return [[Function 0 (f):
    6:   local i,e = string.find(s, p)
GETIMPORT R2 2 [string.find]
MOVE R3 R0
MOVE R4 R1
CALL R2 2 2
    7:   if i then return string.sub(s, i, e) end
JUMPIFNOT R2 L1
REMARK builtin string.sub/3
MOVE R5 R0
MOVE R6 R2
MOVE R7 R3
FASTCALL 45 L0
GETIMPORT R4 4 [string.sub]
CALL R4 3 -1
L0: RETURN R4 -1
    8: end
L1: RETURN R0 0

Function 1 (??):
   11:   p = string.gsub(p, "%%([0-9])", function (s) return "%" .. (s+1) end)
LOADK R2 K0 ['%']
ADDK R3 R0 K1 [1]
CONCAT R1 R2 R3
RETURN R1 1

Function 2 (f1):
   11:   p = string.gsub(p, "%%([0-9])", function (s) return "%" .. (s+1) end)
GETIMPORT R2 2 [string.gsub]
MOVE R3 R1
LOADK R4 K3 ['%%([0-9])']
DUPCLOSURE R5 K4 []
CALL R2 3 1
MOVE R1 R2
   12:   p = string.gsub(p, "^(^?)", "%1()", 1)
GETIMPORT R2 2 [string.gsub]
MOVE R3 R1
LOADK R4 K5 ['^(^?)']
LOADK R5 K6 ['%1()']
LOADN R6 1
CALL R2 4 1
MOVE R1 R2
   13:   p = string.gsub(p, "($?)$", "()%1", 1)
GETIMPORT R2 2 [string.gsub]
MOVE R3 R1
LOADK R4 K7 ['($?)$']
LOADK R5 K8 ['()%1']
LOADN R6 1
CALL R2 4 1
MOVE R1 R2
REMARK allocation: table array 1
   14:   local t = {string.match(s, p)}
NEWTABLE R2 0 1
GETIMPORT R3 10 [string.match]
MOVE R4 R0
MOVE R5 R1
CALL R3 2 -1
SETLIST R2 R3 -1 [1]
REMARK builtin string.sub/3
   15:   return string.sub(s, t[1], t[#t] - 1)
MOVE R4 R0
GETTABLEN R5 R2 1
LENGTH R8 R2
GETTABLE R7 R2 R8
SUBK R6 R7 K11 [1]
FASTCALL 45 L0
GETIMPORT R3 13 [string.sub]
CALL R3 3 -1
L0: RETURN R3 -1

Function 3 (range):
   85:   if i <= j then
JUMPIFNOTLE R0 R1 L0
   86:     return i, range(i+1, j)
MOVE R2 R0
GETUPVAL R3 0
ADDK R4 R0 K0 [1]
MOVE R5 R1
CALL R3 2 -1
RETURN R2 -1
   88: end
L0: RETURN R0 0

Function 4 (??):
   96:   string.gsub(abc, p, function (c) res.s = res.s .. c end)
GETUPVAL R1 0
GETUPVAL R5 0
GETTABLEKS R3 R5 K0 ['s']
MOVE R4 R0
CONCAT R2 R3 R4
SETTABLEKS R2 R1 K0 ['s']
RETURN R0 0

Function 5 (strset):
REMARK allocation: table template 1
   95:   local res = {s=''}
DUPTABLE R1 1
LOADK R2 K2 ['']
SETTABLEKS R2 R1 K0 ['s']
   96:   string.gsub(abc, p, function (c) res.s = res.s .. c end)
GETIMPORT R2 5 [string.gsub]
GETUPVAL R3 0
MOVE R4 R0
REMARK allocation: closure with 1 upvalues
NEWCLOSURE R5 P0
CAPTURE VAL R1
CALL R2 3 0
   97:   return res.s
GETTABLEKS R2 R1 K0 ['s']
RETURN R2 1

Function 6 (setglobal):
REMARK builtin rawset/3
  147:   local function setglobal (n,v) rawset(getfenv(0), n, v) end
GETIMPORT R3 1 [getfenv]
LOADN R4 0
CALL R3 1 1
MOVE R4 R0
MOVE R5 R1
FASTCALL 49 L0
GETIMPORT R2 3 [rawset]
CALL R2 3 0
L0: RETURN R0 0

Function 7 (f):
  152: function f(a,b) return string.gsub(a,'.',b) end
GETIMPORT R2 2 [string.gsub]
MOVE R3 R0
LOADK R4 K3 ['.']
MOVE R5 R1
CALL R2 3 -1
RETURN R2 -1

Function 8 (dostring):
  156: local function dostring (s) return loadstring(s)() or "" end
GETIMPORT R2 2 [loadstring]
MOVE R3 R0
CALL R2 1 1
CALL R2 0 1
ORK R1 R2 K0 ['']
RETURN R1 1

Function 9 (??):
REMARK builtin assert/1
REMARK builtin string.len/1
  167:       assert(string.len(w) == b-a);
FASTCALL1 43 R1 L0
MOVE R6 R1
GETIMPORT R5 2 [string.len]
CALL R5 1 1
L0: SUB R6 R2 R0
JUMPIFEQ R5 R6 L1
LOADB R4 0 +1
L1: LOADB R4 1
L2: FASTCALL1 1 R4 L3
GETIMPORT R3 4 [assert]
CALL R3 1 0
  168:       t[a] = b-a;
L3: GETGLOBAL R3 K5 ['t']
SUB R4 R2 R0
SETTABLE R4 R3 R0
  169:     end)
RETURN R0 0

Function 10 (isbalanced):
  174:   return string.find(string.gsub(s, "%b()", ""), "[()]") == nil
GETIMPORT R2 2 [string.find]
GETIMPORT R3 4 [string.gsub]
MOVE R4 R0
LOADK R5 K5 ['%b()']
LOADK R6 K6 ['']
CALL R3 3 1
LOADK R4 K7 ['[()]']
CALL R2 2 1
JUMPXEQKNIL R2 L0
LOADB R1 0 +1
L0: LOADB R1 1
L1: RETURN R1 1

Function 11 (??):
  183: assert(string.gsub("x and x and x", "x", function () t.n=t.n+1; return t[t.n] end)
GETUPVAL R0 0
GETUPVAL R3 0
GETTABLEKS R2 R3 K1 ['n']
ADDK R1 R2 K0 [1]
SETTABLEKS R1 R0 K1 ['n']
GETUPVAL R1 0
GETUPVAL R3 0
GETTABLEKS R2 R3 K1 ['n']
GETTABLE R0 R1 R2
RETURN R0 1

Function 12 (??):
  187: string.gsub("first second word", "%w%w*", function (w) t.n=t.n+1; t[t.n] = w end)
GETUPVAL R1 0
GETUPVAL R4 0
GETTABLEKS R3 R4 K1 ['n']
ADDK R2 R3 K0 [1]
SETTABLEKS R2 R1 K1 ['n']
GETUPVAL R1 0
GETUPVAL R3 0
GETTABLEKS R2 R3 K1 ['n']
SETTABLE R0 R1 R2
RETURN R0 0

Function 13 (??):
  192:          function (w) t.n=t.n+1; t[t.n] = w end, 2) == "first second word")
GETUPVAL R1 0
GETUPVAL R4 0
GETTABLEKS R3 R4 K1 ['n']
ADDK R2 R3 K0 [1]
SETTABLEKS R2 R1 K1 ['n']
GETUPVAL R1 0
GETUPVAL R3 0
GETTABLEKS R2 R3 K1 ['n']
SETTABLE R0 R1 R2
RETURN R0 0

Function 14 (??):
  210:   return string.gsub(s, "(.)(.+)", function (c,s1) return rev(s1)..c end)
GETGLOBAL R5 K0 ['rev']
MOVE R6 R1
CALL R5 1 1
MOVE R3 R5
MOVE R4 R0
CONCAT R2 R3 R4
RETURN R2 1

Function 15 (rev):
  210:   return string.gsub(s, "(.)(.+)", function (c,s1) return rev(s1)..c end)
GETIMPORT R1 2 [string.gsub]
MOVE R2 R0
LOADK R3 K3 ['(.)(.+)']
DUPCLOSURE R4 K4 []
CALL R1 3 -1
RETURN R1 -1

Function 16 (__index):
  225: t = {}; setmetatable(t, {__index = function (t,s) return string.upper(s) end})
GETIMPORT R2 2 [string.upper]
MOVE R3 R1
CALL R2 1 -1
RETURN R2 -1

Function 17 (malform):
  287:   m = m or "malformed"
ORK R1 R1 K0 ['malformed']
  288:   local r, msg = pcall(string.find, "a", p)
GETIMPORT R2 2 [pcall]
GETIMPORT R3 5 [string.find]
LOADK R4 K6 ['a']
MOVE R5 R0
CALL R2 3 2
REMARK builtin assert/1
  289:   assert(not r and string.find(msg, m))
NOT R5 R2
JUMPIFNOT R5 L0
GETIMPORT R5 5 [string.find]
MOVE R6 R3
MOVE R7 R1
CALL R5 2 1
L0: FASTCALL1 1 R5 L1
GETIMPORT R4 8 [assert]
CALL R4 1 0
  290: end
L1: RETURN R0 0

Function 18 (??):
    3: print('testing pattern matching')
GETIMPORT R0 1 [print]
LOADK R1 K2 ['testing pattern matching']
CALL R0 1 0
    5: function f(s, p)
DUPCLOSURE R0 K3 ['f']
SETGLOBAL R0 K4 ['f']
   10: function f1(s, p)
DUPCLOSURE R0 K5 ['f1']
SETGLOBAL R0 K6 ['f1']
   18: a,b = string.find('', '')    -- empty patterns are tricky
GETIMPORT R0 9 [string.find]
LOADK R1 K10 ['']
LOADK R2 K10 ['']
CALL R0 2 2
SETGLOBAL R0 K11 ['a']
SETGLOBAL R1 K12 ['b']
REMARK builtin assert/1
   19: assert(a == 1 and b == 0);
LOADB R1 0
GETGLOBAL R2 K11 ['a']
JUMPXEQKN R2 K13 L1 NOT [1]
GETGLOBAL R2 K12 ['b']
JUMPXEQKN R2 K14 L0 [0]
LOADB R1 0 +1
L0: LOADB R1 1
L1: FASTCALL1 1 R1 L2
GETIMPORT R0 16 [assert]
CALL R0 1 0
   20: a,b = string.find('alo', '')
L2: GETIMPORT R0 9 [string.find]
LOADK R1 K17 ['alo']
LOADK R2 K10 ['']
CALL R0 2 2
SETGLOBAL R0 K11 ['a']
SETGLOBAL R1 K12 ['b']
REMARK builtin assert/1
   21: assert(a == 1 and b == 0)
LOADB R1 0
GETGLOBAL R2 K11 ['a']
JUMPXEQKN R2 K13 L4 NOT [1]
GETGLOBAL R2 K12 ['b']
JUMPXEQKN R2 K14 L3 [0]
LOADB R1 0 +1
L3: LOADB R1 1
L4: FASTCALL1 1 R1 L5
GETIMPORT R0 16 [assert]
CALL R0 1 0
   22: a,b = string.find('a\0o a\0o a\0o', 'a', 1)   -- first position
L5: GETIMPORT R0 9 [string.find]
LOADK R1 K18 []
LOADK R2 K11 ['a']
LOADN R3 1
CALL R0 3 2
SETGLOBAL R0 K11 ['a']
SETGLOBAL R1 K12 ['b']
REMARK builtin assert/1
   23: assert(a == 1 and b == 1)
LOADB R1 0
GETGLOBAL R2 K11 ['a']
JUMPXEQKN R2 K13 L7 NOT [1]
GETGLOBAL R2 K12 ['b']
JUMPXEQKN R2 K13 L6 [1]
LOADB R1 0 +1
L6: LOADB R1 1
L7: FASTCALL1 1 R1 L8
GETIMPORT R0 16 [assert]
CALL R0 1 0
   24: a,b = string.find('a\0o a\0o a\0o', 'a\0o', 2)   -- starts in the middle
L8: GETIMPORT R0 9 [string.find]
LOADK R1 K18 []
LOADK R2 K19 []
LOADN R3 2
CALL R0 3 2
SETGLOBAL R0 K11 ['a']
SETGLOBAL R1 K12 ['b']
REMARK builtin assert/1
   25: assert(a == 5 and b == 7)
LOADB R1 0
GETGLOBAL R2 K11 ['a']
JUMPXEQKN R2 K20 L10 NOT [5]
GETGLOBAL R2 K12 ['b']
JUMPXEQKN R2 K21 L9 [7]
LOADB R1 0 +1
L9: LOADB R1 1
L10: FASTCALL1 1 R1 L11
GETIMPORT R0 16 [assert]
CALL R0 1 0
   26: a,b = string.find('a\0o a\0o a\0o', 'a\0o', 9)   -- starts in the middle
L11: GETIMPORT R0 9 [string.find]
LOADK R1 K18 []
LOADK R2 K19 []
LOADN R3 9
CALL R0 3 2
SETGLOBAL R0 K11 ['a']
SETGLOBAL R1 K12 ['b']
REMARK builtin assert/1
   27: assert(a == 9 and b == 11)
LOADB R1 0
GETGLOBAL R2 K11 ['a']
JUMPXEQKN R2 K22 L13 NOT [9]
GETGLOBAL R2 K12 ['b']
JUMPXEQKN R2 K23 L12 [11]
LOADB R1 0 +1
L12: LOADB R1 1
L13: FASTCALL1 1 R1 L14
GETIMPORT R0 16 [assert]
CALL R0 1 0
   28: a,b = string.find('a\0a\0a\0a\0\0ab', '\0ab', 2);  -- finds at the end
L14: GETIMPORT R0 9 [string.find]
LOADK R1 K24 []
LOADK R2 K25 []
LOADN R3 2
CALL R0 3 2
SETGLOBAL R0 K11 ['a']
SETGLOBAL R1 K12 ['b']
REMARK builtin assert/1
   29: assert(a == 9 and b == 11);
LOADB R1 0
GETGLOBAL R2 K11 ['a']
JUMPXEQKN R2 K22 L16 NOT [9]
GETGLOBAL R2 K12 ['b']
JUMPXEQKN R2 K23 L15 [11]
LOADB R1 0 +1
L15: LOADB R1 1
L16: FASTCALL1 1 R1 L17
GETIMPORT R0 16 [assert]
CALL R0 1 0
   30: a,b = string.find('a\0a\0a\0a\0\0ab', 'b')    -- last position
L17: GETIMPORT R0 9 [string.find]
LOADK R1 K24 []
LOADK R2 K12 ['b']
CALL R0 2 2
SETGLOBAL R0 K11 ['a']
SETGLOBAL R1 K12 ['b']
REMARK builtin assert/1
   31: assert(a == 11 and b == 11)
LOADB R1 0
GETGLOBAL R2 K11 ['a']
JUMPXEQKN R2 K23 L19 NOT [11]
GETGLOBAL R2 K12 ['b']
JUMPXEQKN R2 K23 L18 [11]
LOADB R1 0 +1
L18: LOADB R1 1
L19: FASTCALL1 1 R1 L20
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   32: assert(string.find('a\0a\0a\0a\0\0ab', 'b\0') == nil)   -- check ending
L20: GETIMPORT R2 9 [string.find]
LOADK R3 K24 []
LOADK R4 K26 []
CALL R2 2 1
JUMPXEQKNIL R2 L21
LOADB R1 0 +1
L21: LOADB R1 1
L22: FASTCALL1 1 R1 L23
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   33: assert(string.find('', '\0') == nil)
L23: GETIMPORT R2 9 [string.find]
LOADK R3 K10 ['']
LOADK R4 K27 []
CALL R2 2 1
JUMPXEQKNIL R2 L24
LOADB R1 0 +1
L24: LOADB R1 1
L25: FASTCALL1 1 R1 L26
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   34: assert(string.find('alo123alo', '12') == 4)
L26: GETIMPORT R2 9 [string.find]
LOADK R3 K28 ['alo123alo']
LOADK R4 K29 ['12']
CALL R2 2 1
JUMPXEQKN R2 K30 L27 [4]
LOADB R1 0 +1
L27: LOADB R1 1
L28: FASTCALL1 1 R1 L29
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   35: assert(string.find('alo123alo', '^12') == nil)
L29: GETIMPORT R2 9 [string.find]
LOADK R3 K28 ['alo123alo']
LOADK R4 K31 ['^12']
CALL R2 2 1
JUMPXEQKNIL R2 L30
LOADB R1 0 +1
L30: LOADB R1 1
L31: FASTCALL1 1 R1 L32
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   37: assert(f('aloALO', '%l*') == 'alo')
L32: GETGLOBAL R2 K4 ['f']
LOADK R3 K32 ['aloALO']
LOADK R4 K33 ['%l*']
CALL R2 2 1
JUMPXEQKS R2 K17 L33 ['alo']
LOADB R1 0 +1
L33: LOADB R1 1
L34: FASTCALL1 1 R1 L35
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   38: assert(f('aLo_ALO', '%a*') == 'aLo')
L35: GETGLOBAL R2 K4 ['f']
LOADK R3 K34 ['aLo_ALO']
LOADK R4 K35 ['%a*']
CALL R2 2 1
JUMPXEQKS R2 K36 L36 ['aLo']
LOADB R1 0 +1
L36: LOADB R1 1
L37: FASTCALL1 1 R1 L38
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   40: assert(f("  \n\r*&\n\r   xuxu  \n\n", "%g%g%g+") == "xuxu")
L38: GETGLOBAL R2 K4 ['f']
LOADK R3 K37 []
LOADK R4 K38 ['%g%g%g+']
CALL R2 2 1
JUMPXEQKS R2 K39 L39 ['xuxu']
LOADB R1 0 +1
L39: LOADB R1 1
L40: FASTCALL1 1 R1 L41
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   42: assert(f('aaab', 'a*') == 'aaa');
L41: GETGLOBAL R2 K4 ['f']
LOADK R3 K40 ['aaab']
LOADK R4 K41 ['a*']
CALL R2 2 1
JUMPXEQKS R2 K42 L42 ['aaa']
LOADB R1 0 +1
L42: LOADB R1 1
L43: FASTCALL1 1 R1 L44
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   43: assert(f('aaa', '^.*$') == 'aaa');
L44: GETGLOBAL R2 K4 ['f']
LOADK R3 K42 ['aaa']
LOADK R4 K43 ['^.*$']
CALL R2 2 1
JUMPXEQKS R2 K42 L45 ['aaa']
LOADB R1 0 +1
L45: LOADB R1 1
L46: FASTCALL1 1 R1 L47
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   44: assert(f('aaa', 'b*') == '');
L47: GETGLOBAL R2 K4 ['f']
LOADK R3 K42 ['aaa']
LOADK R4 K44 ['b*']
CALL R2 2 1
JUMPXEQKS R2 K10 L48 ['']
LOADB R1 0 +1
L48: LOADB R1 1
L49: FASTCALL1 1 R1 L50
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   45: assert(f('aaa', 'ab*a') == 'aa')
L50: GETGLOBAL R2 K4 ['f']
LOADK R3 K42 ['aaa']
LOADK R4 K45 ['ab*a']
CALL R2 2 1
JUMPXEQKS R2 K46 L51 ['aa']
LOADB R1 0 +1
L51: LOADB R1 1
L52: FASTCALL1 1 R1 L53
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   46: assert(f('aba', 'ab*a') == 'aba')
L53: GETGLOBAL R2 K4 ['f']
LOADK R3 K47 ['aba']
LOADK R4 K45 ['ab*a']
CALL R2 2 1
JUMPXEQKS R2 K47 L54 ['aba']
LOADB R1 0 +1
L54: LOADB R1 1
L55: FASTCALL1 1 R1 L56
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   47: assert(f('aaab', 'a+') == 'aaa')
L56: GETGLOBAL R2 K4 ['f']
LOADK R3 K40 ['aaab']
LOADK R4 K48 ['a+']
CALL R2 2 1
JUMPXEQKS R2 K42 L57 ['aaa']
LOADB R1 0 +1
L57: LOADB R1 1
L58: FASTCALL1 1 R1 L59
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   48: assert(f('aaa', '^.+$') == 'aaa')
L59: GETGLOBAL R2 K4 ['f']
LOADK R3 K42 ['aaa']
LOADK R4 K49 ['^.+$']
CALL R2 2 1
JUMPXEQKS R2 K42 L60 ['aaa']
LOADB R1 0 +1
L60: LOADB R1 1
L61: FASTCALL1 1 R1 L62
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   49: assert(f('aaa', 'b+') == nil)
L62: GETGLOBAL R2 K4 ['f']
LOADK R3 K42 ['aaa']
LOADK R4 K50 ['b+']
CALL R2 2 1
JUMPXEQKNIL R2 L63
LOADB R1 0 +1
L63: LOADB R1 1
L64: FASTCALL1 1 R1 L65
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   50: assert(f('aaa', 'ab+a') == nil)
L65: GETGLOBAL R2 K4 ['f']
LOADK R3 K42 ['aaa']
LOADK R4 K51 ['ab+a']
CALL R2 2 1
JUMPXEQKNIL R2 L66
LOADB R1 0 +1
L66: LOADB R1 1
L67: FASTCALL1 1 R1 L68
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   51: assert(f('aba', 'ab+a') == 'aba')
L68: GETGLOBAL R2 K4 ['f']
LOADK R3 K47 ['aba']
LOADK R4 K51 ['ab+a']
CALL R2 2 1
JUMPXEQKS R2 K47 L69 ['aba']
LOADB R1 0 +1
L69: LOADB R1 1
L70: FASTCALL1 1 R1 L71
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   52: assert(f('a$a', '.$') == 'a')
L71: GETGLOBAL R2 K4 ['f']
LOADK R3 K52 ['a$a']
LOADK R4 K53 ['.$']
CALL R2 2 1
JUMPXEQKS R2 K11 L72 ['a']
LOADB R1 0 +1
L72: LOADB R1 1
L73: FASTCALL1 1 R1 L74
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   53: assert(f('a$a', '.%$') == 'a$')
L74: GETGLOBAL R2 K4 ['f']
LOADK R3 K52 ['a$a']
LOADK R4 K54 ['.%$']
CALL R2 2 1
JUMPXEQKS R2 K55 L75 ['a$']
LOADB R1 0 +1
L75: LOADB R1 1
L76: FASTCALL1 1 R1 L77
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   54: assert(f('a$a', '.$.') == 'a$a')
L77: GETGLOBAL R2 K4 ['f']
LOADK R3 K52 ['a$a']
LOADK R4 K56 ['.$.']
CALL R2 2 1
JUMPXEQKS R2 K52 L78 ['a$a']
LOADB R1 0 +1
L78: LOADB R1 1
L79: FASTCALL1 1 R1 L80
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   55: assert(f('a$a', '$$') == nil)
L80: GETGLOBAL R2 K4 ['f']
LOADK R3 K52 ['a$a']
LOADK R4 K57 ['$$']
CALL R2 2 1
JUMPXEQKNIL R2 L81
LOADB R1 0 +1
L81: LOADB R1 1
L82: FASTCALL1 1 R1 L83
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   56: assert(f('a$b', 'a$') == nil)
L83: GETGLOBAL R2 K4 ['f']
LOADK R3 K58 ['a$b']
LOADK R4 K55 ['a$']
CALL R2 2 1
JUMPXEQKNIL R2 L84
LOADB R1 0 +1
L84: LOADB R1 1
L85: FASTCALL1 1 R1 L86
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   57: assert(f('a$a', '$') == '')
L86: GETGLOBAL R2 K4 ['f']
LOADK R3 K52 ['a$a']
LOADK R4 K59 ['$']
CALL R2 2 1
JUMPXEQKS R2 K10 L87 ['']
LOADB R1 0 +1
L87: LOADB R1 1
L88: FASTCALL1 1 R1 L89
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   58: assert(f('', 'b*') == '')
L89: GETGLOBAL R2 K4 ['f']
LOADK R3 K10 ['']
LOADK R4 K44 ['b*']
CALL R2 2 1
JUMPXEQKS R2 K10 L90 ['']
LOADB R1 0 +1
L90: LOADB R1 1
L91: FASTCALL1 1 R1 L92
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   59: assert(f('aaa', 'bb*') == nil)
L92: GETGLOBAL R2 K4 ['f']
LOADK R3 K42 ['aaa']
LOADK R4 K60 ['bb*']
CALL R2 2 1
JUMPXEQKNIL R2 L93
LOADB R1 0 +1
L93: LOADB R1 1
L94: FASTCALL1 1 R1 L95
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   60: assert(f('aaab', 'a-') == '')
L95: GETGLOBAL R2 K4 ['f']
LOADK R3 K40 ['aaab']
LOADK R4 K61 ['a-']
CALL R2 2 1
JUMPXEQKS R2 K10 L96 ['']
LOADB R1 0 +1
L96: LOADB R1 1
L97: FASTCALL1 1 R1 L98
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   61: assert(f('aaa', '^.-$') == 'aaa')
L98: GETGLOBAL R2 K4 ['f']
LOADK R3 K42 ['aaa']
LOADK R4 K62 ['^.-$']
CALL R2 2 1
JUMPXEQKS R2 K42 L99 ['aaa']
LOADB R1 0 +1
L99: LOADB R1 1
L100: FASTCALL1 1 R1 L101
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   62: assert(f('aabaaabaaabaaaba', 'b.*b') == 'baaabaaabaaab')
L101: GETGLOBAL R2 K4 ['f']
LOADK R3 K63 ['aabaaabaaabaaaba']
LOADK R4 K64 ['b.*b']
CALL R2 2 1
JUMPXEQKS R2 K65 L102 ['baaabaaabaaab']
LOADB R1 0 +1
L102: LOADB R1 1
L103: FASTCALL1 1 R1 L104
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   63: assert(f('aabaaabaaabaaaba', 'b.-b') == 'baaab')
L104: GETGLOBAL R2 K4 ['f']
LOADK R3 K63 ['aabaaabaaabaaaba']
LOADK R4 K66 ['b.-b']
CALL R2 2 1
JUMPXEQKS R2 K67 L105 ['baaab']
LOADB R1 0 +1
L105: LOADB R1 1
L106: FASTCALL1 1 R1 L107
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   64: assert(f('alo xo', '.o$') == 'xo')
L107: GETGLOBAL R2 K4 ['f']
LOADK R3 K68 ['alo xo']
LOADK R4 K69 ['.o$']
CALL R2 2 1
JUMPXEQKS R2 K70 L108 ['xo']
LOADB R1 0 +1
L108: LOADB R1 1
L109: FASTCALL1 1 R1 L110
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   65: assert(f(' \n isto é assim', '%S%S*') == 'isto')
L110: GETGLOBAL R2 K4 ['f']
LOADK R3 K71 []
LOADK R4 K72 ['%S%S*']
CALL R2 2 1
JUMPXEQKS R2 K73 L111 ['isto']
LOADB R1 0 +1
L111: LOADB R1 1
L112: FASTCALL1 1 R1 L113
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   66: assert(f(' \n isto é assim', '%S*$') == 'assim')
L113: GETGLOBAL R2 K4 ['f']
LOADK R3 K71 []
LOADK R4 K74 ['%S*$']
CALL R2 2 1
JUMPXEQKS R2 K75 L114 ['assim']
LOADB R1 0 +1
L114: LOADB R1 1
L115: FASTCALL1 1 R1 L116
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   67: assert(f(' \n isto é assim', '[a-z]*$') == 'assim')
L116: GETGLOBAL R2 K4 ['f']
LOADK R3 K71 []
LOADK R4 K76 ['[a-z]*$']
CALL R2 2 1
JUMPXEQKS R2 K75 L117 ['assim']
LOADB R1 0 +1
L117: LOADB R1 1
L118: FASTCALL1 1 R1 L119
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   68: assert(f('um caracter ? extra', '[^%sa-z]') == '?')
L119: GETGLOBAL R2 K4 ['f']
LOADK R3 K77 ['um caracter ? extra']
LOADK R4 K78 ['[^%sa-z]']
CALL R2 2 1
JUMPXEQKS R2 K79 L120 ['?']
LOADB R1 0 +1
L120: LOADB R1 1
L121: FASTCALL1 1 R1 L122
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   69: assert(f('', 'a?') == '')
L122: GETGLOBAL R2 K4 ['f']
LOADK R3 K10 ['']
LOADK R4 K80 ['a?']
CALL R2 2 1
JUMPXEQKS R2 K10 L123 ['']
LOADB R1 0 +1
L123: LOADB R1 1
L124: FASTCALL1 1 R1 L125
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   70: assert(f('á', 'á?') == 'á')
L125: GETGLOBAL R2 K4 ['f']
LOADK R3 K81 ['á']
LOADK R4 K82 ['á?']
CALL R2 2 1
JUMPXEQKS R2 K81 L126 ['á']
LOADB R1 0 +1
L126: LOADB R1 1
L127: FASTCALL1 1 R1 L128
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   71: assert(f('ábl', 'á?b?l?') == 'ábl')
L128: GETGLOBAL R2 K4 ['f']
LOADK R3 K83 ['ábl']
LOADK R4 K84 ['á?b?l?']
CALL R2 2 1
JUMPXEQKS R2 K83 L129 ['ábl']
LOADB R1 0 +1
L129: LOADB R1 1
L130: FASTCALL1 1 R1 L131
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   72: assert(f('  ábl', 'á?b?l?') == '')
L131: GETGLOBAL R2 K4 ['f']
LOADK R3 K85 ['  ábl']
LOADK R4 K84 ['á?b?l?']
CALL R2 2 1
JUMPXEQKS R2 K10 L132 ['']
LOADB R1 0 +1
L132: LOADB R1 1
L133: FASTCALL1 1 R1 L134
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   73: assert(f('aa', '^aa?a?a') == 'aa')
L134: GETGLOBAL R2 K4 ['f']
LOADK R3 K46 ['aa']
LOADK R4 K86 ['^aa?a?a']
CALL R2 2 1
JUMPXEQKS R2 K46 L135 ['aa']
LOADB R1 0 +1
L135: LOADB R1 1
L136: FASTCALL1 1 R1 L137
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   74: assert(f(']]]áb', '[^]]') == 'á')
L137: GETGLOBAL R2 K4 ['f']
LOADK R3 K87 [']]]áb']
LOADK R4 K88 ['[^]]']
CALL R2 2 1
JUMPXEQKS R2 K81 L138 ['á']
LOADB R1 0 +1
L138: LOADB R1 1
L139: FASTCALL1 1 R1 L140
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   75: assert(f("0alo alo", "%x*") == "0a")
L140: GETGLOBAL R2 K4 ['f']
LOADK R3 K89 ['0alo alo']
LOADK R4 K90 ['%x*']
CALL R2 2 1
JUMPXEQKS R2 K91 L141 ['0a']
LOADB R1 0 +1
L141: LOADB R1 1
L142: FASTCALL1 1 R1 L143
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   76: assert(f("alo alo", "%C+") == "alo alo")
L143: GETGLOBAL R2 K4 ['f']
LOADK R3 K92 ['alo alo']
LOADK R4 K93 ['%C+']
CALL R2 2 1
JUMPXEQKS R2 K92 L144 ['alo alo']
LOADB R1 0 +1
L144: LOADB R1 1
L145: FASTCALL1 1 R1 L146
GETIMPORT R0 16 [assert]
CALL R0 1 0
   77: print('+')
L146: GETIMPORT R0 1 [print]
LOADK R1 K94 ['+']
CALL R0 1 0
REMARK builtin assert/1
   79: assert(f1('alo alx 123 b\0o b\0o', '(..*) %1') == "b\0o b\0o")
GETGLOBAL R2 K6 ['f1']
LOADK R3 K95 []
LOADK R4 K96 ['(..*) %1']
CALL R2 2 1
JUMPXEQKS R2 K97 L147 []
LOADB R1 0 +1
L147: LOADB R1 1
L148: FASTCALL1 1 R1 L149
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   80: assert(f1('axz123= 4= 4 34', '(.+)=(.*)=%2 %1') == '3= 4= 4 3')
L149: GETGLOBAL R2 K6 ['f1']
LOADK R3 K98 ['axz123= 4= 4 34']
LOADK R4 K99 ['(.+)=(.*)=%2 %1']
CALL R2 2 1
JUMPXEQKS R2 K100 L150 ['3= 4= 4 3']
LOADB R1 0 +1
L150: LOADB R1 1
L151: FASTCALL1 1 R1 L152
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   81: assert(f1('=======', '^(=*)=%1$') == '=======')
L152: GETGLOBAL R2 K6 ['f1']
LOADK R3 K101 ['=======']
LOADK R4 K102 ['^(=*)=%1$']
CALL R2 2 1
JUMPXEQKS R2 K101 L153 ['=======']
LOADB R1 0 +1
L153: LOADB R1 1
L154: FASTCALL1 1 R1 L155
GETIMPORT R0 16 [assert]
CALL R0 1 0
REMARK builtin assert/1
   82: assert(string.match('==========', '^([=]*)=%1$') == nil)
L155: GETIMPORT R2 104 [string.match]
LOADK R3 K105 ['==========']
LOADK R4 K106 ['^([=]*)=%1$']
CALL R2 2 1
JUMPXEQKNIL R2 L156
LOADB R1 0 +1
L156: LOADB R1 1
L157: FASTCALL1 1 R1 L158
GETIMPORT R0 16 [assert]
CALL R0 1 0
   84: local function range (i, j)
L158: DUPCLOSURE R0 K107 ['range']
CAPTURE VAL R0
REMARK builtin string.char/1+
   90: local abc = string.char(range(0, 255));
MOVE R2 R0
LOADN R3 0
LOADN R4 255
CALL R2 2 -1
FASTCALL 42 L159
GETIMPORT R1 109 [string.char]
CALL R1 -1 1
REMARK builtin assert/1
REMARK builtin string.len/1
   92: assert(string.len(abc) == 256)
L159: FASTCALL1 43 R1 L160
MOVE R5 R1
GETIMPORT R4 111 [string.len]
CALL R4 1 1
L160: JUMPXEQKN R4 K112 L161 [256]
LOADB R3 0 +1
L161: LOADB R3 1
L162: FASTCALL1 1 R3 L163
GETIMPORT R2 16 [assert]
CALL R2 1 0
   94: function strset (p)
L163: DUPCLOSURE R2 K113 ['strset']
CAPTURE VAL R1
SETGLOBAL R2 K114 ['strset']
REMARK builtin assert/1
REMARK builtin string.len/1+
  100: assert(string.len(strset('[\200-\210]')) == 11)
GETGLOBAL R5 K114 ['strset']
LOADK R6 K115 ['[È-Ò]']
CALL R5 1 -1
FASTCALL 43 L164
GETIMPORT R4 111 [string.len]
CALL R4 -1 1
L164: JUMPXEQKN R4 K23 L165 [11]
LOADB R3 0 +1
L165: LOADB R3 1
L166: FASTCALL1 1 R3 L167
GETIMPORT R2 16 [assert]
CALL R2 1 0
REMARK builtin assert/1
  102: assert(strset('[a-z]') == "abcdefghijklmnopqrstuvwxyz")
L167: GETGLOBAL R4 K114 ['strset']
LOADK R5 K116 ['[a-z]']
CALL R4 1 1
JUMPXEQKS R4 K117 L168 ['abcdefghijklmnopqrstuvwxyz']
LOADB R3 0 +1
L168: LOADB R3 1
L169: FASTCALL1 1 R3 L170
GETIMPORT R2 16 [assert]
CALL R2 1 0
REMARK builtin assert/1
  103: assert(strset('[a-z%d]') == strset('[%da-uu-z]'))
L170: GETGLOBAL R4 K114 ['strset']
LOADK R5 K118 ['[a-z%d]']
CALL R4 1 1
GETGLOBAL R5 K114 ['strset']
LOADK R6 K119 ['[%da-uu-z]']
CALL R5 1 1
JUMPIFEQ R4 R5 L171
LOADB R3 0 +1
L171: LOADB R3 1
L172: FASTCALL1 1 R3 L173
GETIMPORT R2 16 [assert]
CALL R2 1 0
REMARK builtin assert/1
  104: assert(strset('[a-]') == "-a")
L173: GETGLOBAL R4 K114 ['strset']
LOADK R5 K120 ['[a-]']
CALL R4 1 1
JUMPXEQKS R4 K121 L174 ['-a']
LOADB R3 0 +1
L174: LOADB R3 1
L175: FASTCALL1 1 R3 L176
GETIMPORT R2 16 [assert]
CALL R2 1 0
REMARK builtin assert/1
  105: assert(strset('[^%W]') == strset('[%w]'))
L176: GETGLOBAL R4 K114 ['strset']
LOADK R5 K122 ['[^%W]']
CALL R4 1 1
GETGLOBAL R5 K114 ['strset']
LOADK R6 K123 ['[%w]']
CALL R5 1 1
JUMPIFEQ R4 R5 L177
LOADB R3 0 +1
L177: LOADB R3 1
L178: FASTCALL1 1 R3 L179
GETIMPORT R2 16 [assert]
CALL R2 1 0
REMARK builtin assert/1
  106: assert(strset('[]%%]') == '%]')
L179: GETGLOBAL R4 K114 ['strset']
LOADK R5 K124 ['[]%%]']
CALL R4 1 1
JUMPXEQKS R4 K125 L180 ['%]']
LOADB R3 0 +1
L180: LOADB R3 1
L181: FASTCALL1 1 R3 L182
GETIMPORT R2 16 [assert]
CALL R2 1 0
REMARK builtin assert/1
  107: assert(strset('[a%-z]') == '-az')
L182: GETGLOBAL R4 K114 ['strset']
LOADK R5 K126 ['[a%-z]']
CALL R4 1 1
JUMPXEQKS R4 K127 L183 ['-az']
LOADB R3 0 +1
L183: LOADB R3 1
L184: FASTCALL1 1 R3 L185
GETIMPORT R2 16 [assert]
CALL R2 1 0
REMARK builtin assert/1
  108: assert(strset('[%^%[%-a%]%-b]') == '-[]^ab')
L185: GETGLOBAL R4 K114 ['strset']
LOADK R5 K128 ['[%^%[%-a%]%-b]']
CALL R4 1 1
JUMPXEQKS R4 K129 L186 ['-[]^ab']
LOADB R3 0 +1
L186: LOADB R3 1
L187: FASTCALL1 1 R3 L188
GETIMPORT R2 16 [assert]
CALL R2 1 0
REMARK builtin assert/1
  109: assert(strset('%Z') == strset('[\1-\255]'))
L188: GETGLOBAL R4 K114 ['strset']
LOADK R5 K130 ['%Z']
CALL R4 1 1
GETGLOBAL R5 K114 ['strset']
LOADK R6 K131 []
CALL R5 1 1
JUMPIFEQ R4 R5 L189
LOADB R3 0 +1
L189: LOADB R3 1
L190: FASTCALL1 1 R3 L191
GETIMPORT R2 16 [assert]
CALL R2 1 0
REMARK builtin assert/1
  110: assert(strset('.') == strset('[\1-\255%z]'))
L191: GETGLOBAL R4 K114 ['strset']
LOADK R5 K132 ['.']
CALL R4 1 1
GETGLOBAL R5 K114 ['strset']
LOADK R6 K133 []
CALL R5 1 1
JUMPIFEQ R4 R5 L192
LOADB R3 0 +1
L192: LOADB R3 1
L193: FASTCALL1 1 R3 L194
GETIMPORT R2 16 [assert]
CALL R2 1 0
  111: print('+');
L194: GETIMPORT R2 1 [print]
LOADK R3 K94 ['+']
CALL R2 1 0
REMARK builtin assert/1
  113: assert(string.match("alo xyzK", "(%w+)K") == "xyz")
GETIMPORT R4 104 [string.match]
LOADK R5 K134 ['alo xyzK']
LOADK R6 K135 ['(%w+)K']
CALL R4 2 1
JUMPXEQKS R4 K136 L195 ['xyz']
LOADB R3 0 +1
L195: LOADB R3 1
L196: FASTCALL1 1 R3 L197
GETIMPORT R2 16 [assert]
CALL R2 1 0
REMARK builtin assert/1
  114: assert(string.match("254 K", "(%d*)K") == "")
L197: GETIMPORT R4 104 [string.match]
LOADK R5 K137 ['254 K']
LOADK R6 K138 ['(%d*)K']
CALL R4 2 1
JUMPXEQKS R4 K10 L198 ['']
LOADB R3 0 +1
L198: LOADB R3 1
L199: FASTCALL1 1 R3 L200
GETIMPORT R2 16 [assert]
CALL R2 1 0
REMARK builtin assert/1
  115: assert(string.match("alo ", "(%w*)$") == "")
L200: GETIMPORT R4 104 [string.match]
LOADK R5 K139 ['alo ']
LOADK R6 K140 ['(%w*)$']
CALL R4 2 1
JUMPXEQKS R4 K10 L201 ['']
LOADB R3 0 +1
L201: LOADB R3 1
L202: FASTCALL1 1 R3 L203
GETIMPORT R2 16 [assert]
CALL R2 1 0
REMARK builtin assert/1
  116: assert(string.match("alo ", "(%w+)$") == nil)
L203: GETIMPORT R4 104 [string.match]
LOADK R5 K139 ['alo ']
LOADK R6 K141 ['(%w+)$']
CALL R4 2 1
JUMPXEQKNIL R4 L204
LOADB R3 0 +1
L204: LOADB R3 1
L205: FASTCALL1 1 R3 L206
GETIMPORT R2 16 [assert]
CALL R2 1 0
REMARK builtin assert/1
  117: assert(string.find("(álo)", "%(á") == 1)
L206: GETIMPORT R4 9 [string.find]
LOADK R5 K142 ['(álo)']
LOADK R6 K143 ['%(á']
CALL R4 2 1
JUMPXEQKN R4 K13 L207 [1]
LOADB R3 0 +1
L207: LOADB R3 1
L208: FASTCALL1 1 R3 L209
GETIMPORT R2 16 [assert]
CALL R2 1 0
  118: local a, b, c, d, e = string.match("âlo alo", "^(((.).).* (%w*))$")
L209: GETIMPORT R2 104 [string.match]
LOADK R3 K144 ['âlo alo']
LOADK R4 K145 ['^(((.).).* (%w*))$']
CALL R2 2 5
REMARK builtin assert/1
  119: assert(a == 'âlo alo' and b == 'âl' and c == 'â' and d == 'alo' and e == nil)
LOADB R8 0
JUMPXEQKS R2 K144 L211 NOT ['âlo alo']
LOADB R8 0
JUMPXEQKS R3 K146 L211 NOT ['âl']
LOADB R8 0
JUMPXEQKS R4 K147 L211 NOT ['â']
LOADB R8 0
JUMPXEQKS R5 K17 L211 NOT ['alo']
JUMPXEQKNIL R6 L210
LOADB R8 0 +1
L210: LOADB R8 1
L211: FASTCALL1 1 R8 L212
GETIMPORT R7 16 [assert]
CALL R7 1 0
  120: a, b, c, d  = string.match('0123456789', '(.+(.?)())')
L212: GETIMPORT R7 104 [string.match]
LOADK R8 K148 ['0123456789']
LOADK R9 K149 ['(.+(.?)())']
CALL R7 2 4
MOVE R2 R7
MOVE R3 R8
MOVE R4 R9
MOVE R5 R10
REMARK builtin assert/1
  121: assert(a == '0123456789' and b == '' and c == 11 and d == nil)
LOADB R8 0
JUMPXEQKS R2 K148 L214 NOT ['0123456789']
LOADB R8 0
JUMPXEQKS R3 K10 L214 NOT ['']
LOADB R8 0
JUMPXEQKN R4 K23 L214 NOT [11]
JUMPXEQKNIL R5 L213
LOADB R8 0 +1
L213: LOADB R8 1
L214: FASTCALL1 1 R8 L215
GETIMPORT R7 16 [assert]
CALL R7 1 0
  122: print('+')
L215: GETIMPORT R7 1 [print]
LOADK R8 K94 ['+']
CALL R7 1 0
REMARK builtin assert/1
  124: assert(string.gsub('ülo ülo', 'ü', 'x') == 'xlo xlo')
GETIMPORT R9 151 [string.gsub]
LOADK R10 K152 ['ülo ülo']
LOADK R11 K153 ['ü']
LOADK R12 K154 ['x']
CALL R9 3 1
JUMPXEQKS R9 K155 L216 ['xlo xlo']
LOADB R8 0 +1
L216: LOADB R8 1
L217: FASTCALL1 1 R8 L218
GETIMPORT R7 16 [assert]
CALL R7 1 0
REMARK builtin assert/1
  125: assert(string.gsub('alo úlo  ', ' +$', '') == 'alo úlo')  -- trim
L218: GETIMPORT R9 151 [string.gsub]
LOADK R10 K156 ['alo úlo  ']
LOADK R11 K157 [' +$']
LOADK R12 K10 ['']
CALL R9 3 1
JUMPXEQKS R9 K158 L219 ['alo úlo']
LOADB R8 0 +1
L219: LOADB R8 1
L220: FASTCALL1 1 R8 L221
GETIMPORT R7 16 [assert]
CALL R7 1 0
REMARK builtin assert/1
  126: assert(string.gsub('  alo alo  ', '^%s*(.-)%s*$', '%1') == 'alo alo')  -- double trim
L221: GETIMPORT R9 151 [string.gsub]
LOADK R10 K159 ['  alo alo  ']
LOADK R11 K160 ['^%s*(.-)%s*$']
LOADK R12 K161 ['%1']
CALL R9 3 1
JUMPXEQKS R9 K92 L222 ['alo alo']
LOADB R8 0 +1
L222: LOADB R8 1
L223: FASTCALL1 1 R8 L224
GETIMPORT R7 16 [assert]
CALL R7 1 0
REMARK builtin assert/1
  127: assert(string.gsub('alo  alo  \n 123\n ', '%s+', ' ') == 'alo alo 123 ')
L224: GETIMPORT R9 151 [string.gsub]
LOADK R10 K162 []
LOADK R11 K163 ['%s+']
LOADK R12 K164 [' ']
CALL R9 3 1
JUMPXEQKS R9 K165 L225 ['alo alo 123 ']
LOADB R8 0 +1
L225: LOADB R8 1
L226: FASTCALL1 1 R8 L227
GETIMPORT R7 16 [assert]
CALL R7 1 0
  128: t = "abç d"
L227: LOADK R7 K166 ['abç d']
SETGLOBAL R7 K167 ['t']
  129: a, b = string.gsub(t, '(.)', '%1@')
GETIMPORT R7 151 [string.gsub]
GETGLOBAL R8 K167 ['t']
LOADK R9 K168 ['(.)']
LOADK R10 K169 ['%1@']
CALL R7 3 2
MOVE R2 R7
MOVE R3 R8
REMARK builtin assert/1
  130: assert('@'..a == string.gsub(t, '', '@') and b == 5)
LOADB R8 0
LOADK R10 K170 ['@']
MOVE R11 R2
CONCAT R9 R10 R11
GETIMPORT R10 151 [string.gsub]
GETGLOBAL R11 K167 ['t']
LOADK R12 K10 ['']
LOADK R13 K170 ['@']
CALL R10 3 1
JUMPIFNOTEQ R9 R10 L229
JUMPXEQKN R3 K20 L228 [5]
LOADB R8 0 +1
L228: LOADB R8 1
L229: FASTCALL1 1 R8 L230
GETIMPORT R7 16 [assert]
CALL R7 1 0
  131: a, b = string.gsub('abçd', '(.)', '%0@', 2)
L230: GETIMPORT R7 151 [string.gsub]
LOADK R8 K171 ['abçd']
LOADK R9 K168 ['(.)']
LOADK R10 K172 ['%0@']
LOADN R11 2
CALL R7 4 2
MOVE R2 R7
MOVE R3 R8
REMARK builtin assert/1
  132: assert(a == 'a@b@çd' and b == 2)
LOADB R8 0
JUMPXEQKS R2 K173 L232 NOT ['a@b@çd']
JUMPXEQKN R3 K174 L231 [2]
LOADB R8 0 +1
L231: LOADB R8 1
L232: FASTCALL1 1 R8 L233
GETIMPORT R7 16 [assert]
CALL R7 1 0
REMARK builtin assert/1
  133: assert(string.gsub('alo alo', '()[al]', '%1') == '12o 56o')
L233: GETIMPORT R9 151 [string.gsub]
LOADK R10 K92 ['alo alo']
LOADK R11 K175 ['()[al]']
LOADK R12 K161 ['%1']
CALL R9 3 1
JUMPXEQKS R9 K176 L234 ['12o 56o']
LOADB R8 0 +1
L234: LOADB R8 1
L235: FASTCALL1 1 R8 L236
GETIMPORT R7 16 [assert]
CALL R7 1 0
REMARK builtin assert/1
  134: assert(string.gsub("abc=xyz", "(%w*)(%p)(%w+)", "%3%2%1-%0") ==
L236: GETIMPORT R9 151 [string.gsub]
LOADK R10 K177 ['abc=xyz']
LOADK R11 K178 ['(%w*)(%p)(%w+)']
LOADK R12 K179 ['%3%2%1-%0']
CALL R9 3 1
JUMPXEQKS R9 K180 L237 ['xyz=abc-abc=xyz']
LOADB R8 0 +1
L237: LOADB R8 1
L238: FASTCALL1 1 R8 L239
GETIMPORT R7 16 [assert]
CALL R7 1 0
REMARK builtin assert/1
  136: assert(string.gsub("abc", "%w", "%1%0") == "aabbcc")
L239: GETIMPORT R9 151 [string.gsub]
LOADK R10 K181 ['abc']
LOADK R11 K182 ['%w']
LOADK R12 K183 ['%1%0']
CALL R9 3 1
JUMPXEQKS R9 K184 L240 ['aabbcc']
LOADB R8 0 +1
L240: LOADB R8 1
L241: FASTCALL1 1 R8 L242
GETIMPORT R7 16 [assert]
CALL R7 1 0
REMARK builtin assert/1
  137: assert(string.gsub("abc", "%w+", "%0%1") == "abcabc")
L242: GETIMPORT R9 151 [string.gsub]
LOADK R10 K181 ['abc']
LOADK R11 K185 ['%w+']
LOADK R12 K186 ['%0%1']
CALL R9 3 1
JUMPXEQKS R9 K187 L243 ['abcabc']
LOADB R8 0 +1
L243: LOADB R8 1
L244: FASTCALL1 1 R8 L245
GETIMPORT R7 16 [assert]
CALL R7 1 0
REMARK builtin assert/1
  138: assert(string.gsub('áéí', '$', '\0óú') == 'áéí\0óú')
L245: GETIMPORT R9 151 [string.gsub]
LOADK R10 K188 ['áéí']
LOADK R11 K59 ['$']
LOADK R12 K189 []
CALL R9 3 1
JUMPXEQKS R9 K190 L246 []
LOADB R8 0 +1
L246: LOADB R8 1
L247: FASTCALL1 1 R8 L248
GETIMPORT R7 16 [assert]
CALL R7 1 0
REMARK builtin assert/1
  139: assert(string.gsub('', '^', 'r') == 'r')
L248: GETIMPORT R9 151 [string.gsub]
LOADK R10 K10 ['']
LOADK R11 K191 ['^']
LOADK R12 K192 ['r']
CALL R9 3 1
JUMPXEQKS R9 K192 L249 ['r']
LOADB R8 0 +1
L249: LOADB R8 1
L250: FASTCALL1 1 R8 L251
GETIMPORT R7 16 [assert]
CALL R7 1 0
REMARK builtin assert/1
  140: assert(string.gsub('', '$', 'r') == 'r')
L251: GETIMPORT R9 151 [string.gsub]
LOADK R10 K10 ['']
LOADK R11 K59 ['$']
LOADK R12 K192 ['r']
CALL R9 3 1
JUMPXEQKS R9 K192 L252 ['r']
LOADB R8 0 +1
L252: LOADB R8 1
L253: FASTCALL1 1 R8 L254
GETIMPORT R7 16 [assert]
CALL R7 1 0
  141: print('+')
L254: GETIMPORT R7 1 [print]
LOADK R8 K94 ['+']
CALL R7 1 0
REMARK builtin assert/1
  143: assert(string.gsub("um (dois) tres (quatro)", "(%(%w+%))", string.upper) ==
GETIMPORT R9 151 [string.gsub]
LOADK R10 K193 ['um (dois) tres (quatro)']
LOADK R11 K194 ['(%(%w+%))']
GETIMPORT R12 196 [string.upper]
CALL R9 3 1
JUMPXEQKS R9 K197 L255 ['um (DOIS) tres (QUATRO)']
LOADB R8 0 +1
L255: LOADB R8 1
L256: FASTCALL1 1 R8 L257
GETIMPORT R7 16 [assert]
CALL R7 1 0
  147:   local function setglobal (n,v) rawset(getfenv(0), n, v) end
L257: DUPCLOSURE R7 K198 ['setglobal']
  148:   string.gsub("a=roberto,roberto=a", "(%w+)=(%w%w*)", setglobal)
GETIMPORT R8 151 [string.gsub]
LOADK R9 K199 ['a=roberto,roberto=a']
LOADK R10 K200 ['(%w+)=(%w%w*)']
MOVE R11 R7
CALL R8 3 0
REMARK builtin assert/1
  149:   assert(getfenv(0).a=="roberto" and getfenv(0).roberto=="a")
LOADB R9 0
GETIMPORT R11 202 [getfenv]
LOADN R12 0
CALL R11 1 1
GETTABLEKS R10 R11 K11 ['a']
JUMPXEQKS R10 K203 L259 NOT ['roberto']
GETIMPORT R11 202 [getfenv]
LOADN R12 0
CALL R11 1 1
GETTABLEKS R10 R11 K203 ['roberto']
JUMPXEQKS R10 K11 L258 ['a']
LOADB R9 0 +1
L258: LOADB R9 1
L259: FASTCALL1 1 R9 L260
GETIMPORT R8 16 [assert]
CALL R8 1 0
  152: function f(a,b) return string.gsub(a,'.',b) end
L260: DUPCLOSURE R7 K204 ['f']
SETGLOBAL R7 K4 ['f']
REMARK builtin assert/1
  153: assert(string.gsub("trocar tudo em |teste|b| é |beleza|al|", "|([^|]*)|([^|]*)|", f) ==
GETIMPORT R9 151 [string.gsub]
LOADK R10 K205 ['trocar tudo em |teste|b| é |bele'...]
LOADK R11 K206 ['|([^|]*)|([^|]*)|']
GETGLOBAL R12 K4 ['f']
CALL R9 3 1
JUMPXEQKS R9 K207 L261 ['trocar tudo em bbbbb é alalalala'...]
LOADB R8 0 +1
L261: LOADB R8 1
L262: FASTCALL1 1 R8 L263
GETIMPORT R7 16 [assert]
CALL R7 1 0
  156: local function dostring (s) return loadstring(s)() or "" end
L263: DUPCLOSURE R7 K208 ['dostring']
REMARK builtin assert/1
  157: assert(string.gsub("alo $a=1$ novamente $return a$", "$([^$]*)%$", dostring) ==
GETIMPORT R10 151 [string.gsub]
LOADK R11 K209 ['alo $a=1$ novamente $return a$']
LOADK R12 K210 ['$([^$]*)%$']
MOVE R13 R7
CALL R10 3 1
JUMPXEQKS R10 K211 L264 ['alo  novamente 1']
LOADB R9 0 +1
L264: LOADB R9 1
L265: FASTCALL1 1 R9 L266
GETIMPORT R8 16 [assert]
CALL R8 1 0
  160: x = string.gsub("$x=string.gsub('alo', '.', string.upper)$ assim vai para $return x$",
L266: GETIMPORT R8 151 [string.gsub]
LOADK R9 K212 ['$x=string.gsub('alo', '.', strin'...]
  161:          "$([^$]*)%$", dostring)
LOADK R10 K210 ['$([^$]*)%$']
MOVE R11 R7
  160: x = string.gsub("$x=string.gsub('alo', '.', string.upper)$ assim vai para $return x$",
CALL R8 3 1
SETGLOBAL R8 K154 ['x']
REMARK builtin assert/1
  162: assert(x == ' assim vai para ALO')
GETGLOBAL R10 K154 ['x']
JUMPXEQKS R10 K213 L267 [' assim vai para ALO']
LOADB R9 0 +1
L267: LOADB R9 1
L268: FASTCALL1 1 R9 L269
GETIMPORT R8 16 [assert]
CALL R8 1 0
REMARK allocation: table hash 0
  164: t = {}
L269: NEWTABLE R8 0 0
SETGLOBAL R8 K167 ['t']
  165: s = 'a alo jose  joao'
LOADK R8 K214 ['a alo jose  joao']
SETGLOBAL R8 K215 ['s']
  166: r = string.gsub(s, '()(%w+)()', function (a,w,b)
GETIMPORT R8 151 [string.gsub]
GETGLOBAL R9 K215 ['s']
LOADK R10 K216 ['()(%w+)()']
DUPCLOSURE R11 K217 []
CALL R8 3 1
SETGLOBAL R8 K192 ['r']
REMARK builtin assert/1
  170: assert(s == r and t[1] == 1 and t[3] == 3 and t[7] == 4 and t[13] == 4)
LOADB R9 0
GETGLOBAL R10 K215 ['s']
GETGLOBAL R11 K192 ['r']
JUMPIFNOTEQ R10 R11 L271
LOADB R9 0
GETGLOBAL R11 K167 ['t']
GETTABLEN R10 R11 1
JUMPXEQKN R10 K13 L271 NOT [1]
LOADB R9 0
GETGLOBAL R11 K167 ['t']
GETTABLEN R10 R11 3
JUMPXEQKN R10 K218 L271 NOT [3]
LOADB R9 0
GETGLOBAL R11 K167 ['t']
GETTABLEN R10 R11 7
JUMPXEQKN R10 K30 L271 NOT [4]
GETGLOBAL R11 K167 ['t']
GETTABLEN R10 R11 13
JUMPXEQKN R10 K30 L270 [4]
LOADB R9 0 +1
L270: LOADB R9 1
L271: FASTCALL1 1 R9 L272
GETIMPORT R8 16 [assert]
CALL R8 1 0
  173: function isbalanced (s)
L272: DUPCLOSURE R8 K219 ['isbalanced']
SETGLOBAL R8 K220 ['isbalanced']
REMARK builtin assert/1+
  177: assert(isbalanced("(9 ((8))(\0) 7) \0\0 a b ()(c)() a"))
GETGLOBAL R9 K220 ['isbalanced']
LOADK R10 K221 []
CALL R9 1 -1
FASTCALL 1 L273
GETIMPORT R8 16 [assert]
CALL R8 -1 0
REMARK builtin assert/1
  178: assert(not isbalanced("(9 ((8) 7) a b (\0 c) a"))
L273: GETGLOBAL R10 K220 ['isbalanced']
LOADK R11 K222 []
CALL R10 1 1
NOT R9 R10
FASTCALL1 1 R9 L274
GETIMPORT R8 16 [assert]
CALL R8 1 0
REMARK builtin assert/1
  179: assert(string.gsub("alo 'oi' alo", "%b''", '"') == 'alo " alo')
L274: GETIMPORT R10 151 [string.gsub]
LOADK R11 K223 ['alo 'oi' alo']
LOADK R12 K224 ['%b''']
LOADK R13 K225 ['"']
CALL R10 3 1
JUMPXEQKS R10 K226 L275 ['alo " alo']
LOADB R9 0 +1
L275: LOADB R9 1
L276: FASTCALL1 1 R9 L277
GETIMPORT R8 16 [assert]
CALL R8 1 0
REMARK allocation: table hash 1 array 3
  182: local t = {"apple", "orange", "lime"; n=0}
L277: NEWTABLE R8 1 3
LOADK R9 K227 ['apple']
LOADK R10 K228 ['orange']
LOADK R11 K229 ['lime']
SETLIST R8 R9 3 [1]
LOADN R12 0
SETTABLEKS R12 R8 K230 ['n']
REMARK builtin assert/1
  183: assert(string.gsub("x and x and x", "x", function () t.n=t.n+1; return t[t.n] end)
GETIMPORT R11 151 [string.gsub]
LOADK R12 K231 ['x and x and x']
LOADK R13 K154 ['x']
REMARK allocation: closure with 1 upvalues
NEWCLOSURE R14 P9
CAPTURE REF R8
CALL R11 3 1
JUMPXEQKS R11 K232 L278 ['apple and orange and lime']
LOADB R10 0 +1
L278: LOADB R10 1
L279: FASTCALL1 1 R10 L280
GETIMPORT R9 16 [assert]
CALL R9 1 0
REMARK allocation: table template 1
  186: t = {n=0}
L280: DUPTABLE R9 233
LOADN R10 0
SETTABLEKS R10 R9 K230 ['n']
MOVE R8 R9
  187: string.gsub("first second word", "%w%w*", function (w) t.n=t.n+1; t[t.n] = w end)
GETIMPORT R9 151 [string.gsub]
LOADK R10 K234 ['first second word']
LOADK R11 K235 ['%w%w*']
REMARK allocation: closure with 1 upvalues
NEWCLOSURE R12 P10
CAPTURE REF R8
CALL R9 3 0
REMARK builtin assert/1
  188: assert(t[1] == "first" and t[2] == "second" and t[3] == "word" and t.n == 3)
LOADB R10 0
GETTABLEN R11 R8 1
JUMPXEQKS R11 K236 L282 NOT ['first']
LOADB R10 0
GETTABLEN R11 R8 2
JUMPXEQKS R11 K237 L282 NOT ['second']
LOADB R10 0
GETTABLEN R11 R8 3
JUMPXEQKS R11 K238 L282 NOT ['word']
GETTABLEKS R11 R8 K230 ['n']
JUMPXEQKN R11 K218 L281 [3]
LOADB R10 0 +1
L281: LOADB R10 1
L282: FASTCALL1 1 R10 L283
GETIMPORT R9 16 [assert]
CALL R9 1 0
REMARK allocation: table template 1
  190: t = {n=0}
L283: DUPTABLE R9 233
LOADN R10 0
SETTABLEKS R10 R9 K230 ['n']
MOVE R8 R9
REMARK builtin assert/1
  191: assert(string.gsub("first second word", "%w+",
GETIMPORT R11 151 [string.gsub]
LOADK R12 K234 ['first second word']
LOADK R13 K185 ['%w+']
REMARK allocation: closure with 1 upvalues
  192:          function (w) t.n=t.n+1; t[t.n] = w end, 2) == "first second word")
NEWCLOSURE R14 P11
CAPTURE REF R8
LOADN R15 2
  191: assert(string.gsub("first second word", "%w+",
CALL R11 4 1
JUMPXEQKS R11 K234 L284 ['first second word']
LOADB R10 0 +1
L284: LOADB R10 1
L285: FASTCALL1 1 R10 L286
GETIMPORT R9 16 [assert]
CALL R9 1 0
REMARK builtin assert/1
  193: assert(t[1] == "first" and t[2] == "second" and t[3] == nil)
L286: LOADB R10 0
GETTABLEN R11 R8 1
JUMPXEQKS R11 K236 L288 NOT ['first']
LOADB R10 0
GETTABLEN R11 R8 2
JUMPXEQKS R11 K237 L288 NOT ['second']
GETTABLEN R11 R8 3
JUMPXEQKNIL R11 L287
LOADB R10 0 +1
L287: LOADB R10 1
L288: FASTCALL1 1 R10 L289
GETIMPORT R9 16 [assert]
CALL R9 1 0
REMARK builtin assert/1
  195: assert(not pcall(string.gsub, "alo", "(.", print))
L289: GETIMPORT R11 240 [pcall]
GETIMPORT R12 151 [string.gsub]
LOADK R13 K17 ['alo']
LOADK R14 K241 ['(.']
GETIMPORT R15 1 [print]
CALL R11 4 1
NOT R10 R11
FASTCALL1 1 R10 L290
GETIMPORT R9 16 [assert]
CALL R9 1 0
REMARK builtin assert/1
  196: assert(not pcall(string.gsub, "alo", ".)", print))
L290: GETIMPORT R11 240 [pcall]
GETIMPORT R12 151 [string.gsub]
LOADK R13 K17 ['alo']
LOADK R14 K242 ['.)']
GETIMPORT R15 1 [print]
CALL R11 4 1
NOT R10 R11
FASTCALL1 1 R10 L291
GETIMPORT R9 16 [assert]
CALL R9 1 0
REMARK builtin assert/1
  197: assert(not pcall(string.gsub, "alo", "(.", {}))
L291: GETIMPORT R11 240 [pcall]
GETIMPORT R12 151 [string.gsub]
LOADK R13 K17 ['alo']
LOADK R14 K241 ['(.']
REMARK allocation: table hash 0
NEWTABLE R15 0 0
CALL R11 4 1
NOT R10 R11
FASTCALL1 1 R10 L292
GETIMPORT R9 16 [assert]
CALL R9 1 0
REMARK builtin assert/1
  198: assert(not pcall(string.gsub, "alo", "(.)", "%2"))
L292: GETIMPORT R11 240 [pcall]
GETIMPORT R12 151 [string.gsub]
LOADK R13 K17 ['alo']
LOADK R14 K168 ['(.)']
LOADK R15 K243 ['%2']
CALL R11 4 1
NOT R10 R11
FASTCALL1 1 R10 L293
GETIMPORT R9 16 [assert]
CALL R9 1 0
REMARK builtin assert/1
  199: assert(not pcall(string.gsub, "alo", "(%1)", "a"))
L293: GETIMPORT R11 240 [pcall]
GETIMPORT R12 151 [string.gsub]
LOADK R13 K17 ['alo']
LOADK R14 K244 ['(%1)']
LOADK R15 K11 ['a']
CALL R11 4 1
NOT R10 R11
FASTCALL1 1 R10 L294
GETIMPORT R9 16 [assert]
CALL R9 1 0
REMARK builtin assert/1
  200: assert(not pcall(string.gsub, "alo", "(%0)", "a"))
L294: GETIMPORT R11 240 [pcall]
GETIMPORT R12 151 [string.gsub]
LOADK R13 K17 ['alo']
LOADK R14 K245 ['(%0)']
LOADK R15 K11 ['a']
CALL R11 4 1
NOT R10 R11
FASTCALL1 1 R10 L295
GETIMPORT R9 16 [assert]
CALL R9 1 0
  203: local a = string.rep('a', 300000)
L295: GETIMPORT R9 247 [string.rep]
LOADK R10 K11 ['a']
LOADK R11 K248 [300000]
CALL R9 2 1
REMARK builtin assert/1+
  204: assert(string.find(a, '^a*.?$'))
GETIMPORT R11 9 [string.find]
MOVE R12 R9
LOADK R13 K249 ['^a*.?$']
CALL R11 2 -1
FASTCALL 1 L296
GETIMPORT R10 16 [assert]
CALL R10 -1 0
REMARK builtin assert/1
  205: assert(not string.find(a, '^a*.?b$'))
L296: GETIMPORT R12 9 [string.find]
MOVE R13 R9
LOADK R14 K250 ['^a*.?b$']
CALL R12 2 1
NOT R11 R12
FASTCALL1 1 R11 L297
GETIMPORT R10 16 [assert]
CALL R10 1 0
REMARK builtin assert/1+
  206: assert(string.find(a, '^a-.?$'))
L297: GETIMPORT R11 9 [string.find]
MOVE R12 R9
LOADK R13 K251 ['^a-.?$']
CALL R11 2 -1
FASTCALL 1 L298
GETIMPORT R10 16 [assert]
CALL R10 -1 0
  209: function rev (s)
L298: DUPCLOSURE R10 K252 ['rev']
SETGLOBAL R10 K253 ['rev']
  213: local x = string.rep('012345', 10)
GETIMPORT R10 247 [string.rep]
LOADK R11 K254 ['012345']
LOADN R12 10
CALL R10 2 1
REMARK builtin assert/1
  214: assert(rev(rev(x)) == x)
GETGLOBAL R13 K253 ['rev']
GETGLOBAL R14 K253 ['rev']
MOVE R15 R10
CALL R14 1 -1
CALL R13 -1 1
JUMPIFEQ R13 R10 L299
LOADB R12 0 +1
L299: LOADB R12 1
L300: FASTCALL1 1 R12 L301
GETIMPORT R11 16 [assert]
CALL R11 1 0
REMARK builtin assert/1
  218: assert(string.gsub("alo alo", ".", {}) == "alo alo")
L301: GETIMPORT R13 151 [string.gsub]
LOADK R14 K92 ['alo alo']
LOADK R15 K132 ['.']
REMARK allocation: table hash 0
NEWTABLE R16 0 0
CALL R13 3 1
JUMPXEQKS R13 K92 L302 ['alo alo']
LOADB R12 0 +1
L302: LOADB R12 1
L303: FASTCALL1 1 R12 L304
GETIMPORT R11 16 [assert]
CALL R11 1 0
REMARK builtin assert/1
  219: assert(string.gsub("alo alo", "(.)", {a="AA", l=""}) == "AAo AAo")
L304: GETIMPORT R13 151 [string.gsub]
LOADK R14 K92 ['alo alo']
LOADK R15 K168 ['(.)']
REMARK allocation: table template 2
DUPTABLE R16 256
LOADK R17 K257 ['AA']
SETTABLEKS R17 R16 K11 ['a']
LOADK R17 K10 ['']
SETTABLEKS R17 R16 K255 ['l']
CALL R13 3 1
JUMPXEQKS R13 K258 L305 ['AAo AAo']
LOADB R12 0 +1
L305: LOADB R12 1
L306: FASTCALL1 1 R12 L307
GETIMPORT R11 16 [assert]
CALL R11 1 0
REMARK builtin assert/1
  220: assert(string.gsub("alo alo", "(.).", {a="AA", l="K"}) == "AAo AAo")
L307: GETIMPORT R13 151 [string.gsub]
LOADK R14 K92 ['alo alo']
LOADK R15 K259 ['(.).']
REMARK allocation: table template 2
DUPTABLE R16 256
LOADK R17 K257 ['AA']
SETTABLEKS R17 R16 K11 ['a']
LOADK R17 K260 ['K']
SETTABLEKS R17 R16 K255 ['l']
CALL R13 3 1
JUMPXEQKS R13 K258 L308 ['AAo AAo']
LOADB R12 0 +1
L308: LOADB R12 1
L309: FASTCALL1 1 R12 L310
GETIMPORT R11 16 [assert]
CALL R11 1 0
REMARK builtin assert/1
  221: assert(string.gsub("alo alo", "((.)(.?))", {al="AA", o=false}) == "AAo AAo")
L310: GETIMPORT R13 151 [string.gsub]
LOADK R14 K92 ['alo alo']
LOADK R15 K261 ['((.)(.?))']
REMARK allocation: table template 2
DUPTABLE R16 264
LOADK R17 K257 ['AA']
SETTABLEKS R17 R16 K262 ['al']
LOADB R17 0
SETTABLEKS R17 R16 K263 ['o']
CALL R13 3 1
JUMPXEQKS R13 K258 L311 ['AAo AAo']
LOADB R12 0 +1
L311: LOADB R12 1
L312: FASTCALL1 1 R12 L313
GETIMPORT R11 16 [assert]
CALL R11 1 0
REMARK builtin assert/1
  223: assert(string.gsub("alo alo", "().", {2,5,6}) == "256 alo")
L313: GETIMPORT R13 151 [string.gsub]
LOADK R14 K92 ['alo alo']
LOADK R15 K265 ['().']
REMARK allocation: table array 3
NEWTABLE R16 0 3
LOADN R17 2
LOADN R18 5
LOADN R19 6
SETLIST R16 R17 3 [1]
CALL R13 3 1
JUMPXEQKS R13 K266 L314 ['256 alo']
LOADB R12 0 +1
L314: LOADB R12 1
L315: FASTCALL1 1 R12 L316
GETIMPORT R11 16 [assert]
CALL R11 1 0
REMARK allocation: table hash 0
  225: t = {}; setmetatable(t, {__index = function (t,s) return string.upper(s) end})
L316: NEWTABLE R8 0 0
REMARK builtin setmetatable/2
REMARK allocation: table template 1
DUPTABLE R13 268
DUPCLOSURE R14 K269 ['__index']
SETTABLEKS R14 R13 K267 ['__index']
FASTCALL2 61 R8 R13 L317
MOVE R12 R8
GETIMPORT R11 271 [setmetatable]
CALL R11 2 0
REMARK builtin assert/1
  226: assert(string.gsub("a alo b hi", "%w%w+", t) == "a ALO b HI")
L317: GETIMPORT R13 151 [string.gsub]
LOADK R14 K272 ['a alo b hi']
LOADK R15 K273 ['%w%w+']
MOVE R16 R8
CALL R13 3 1
JUMPXEQKS R13 K274 L318 ['a ALO b HI']
LOADB R12 0 +1
L318: LOADB R12 1
L319: FASTCALL1 1 R12 L320
GETIMPORT R11 16 [assert]
CALL R11 1 0
  231: local a = 0
L320: LOADN R11 0
  232: for i in string.gmatch('abcde', '()') do assert(i == a+1); a=i end
GETIMPORT R12 276 [string.gmatch]
LOADK R13 K277 ['abcde']
LOADK R14 K278 ['()']
CALL R12 2 3
FORGPREP R12 L325
REMARK builtin assert/1
L321: ADDK R19 R11 K13 [1]
JUMPIFEQ R15 R19 L322
LOADB R18 0 +1
L322: LOADB R18 1
L323: FASTCALL1 1 R18 L324
GETIMPORT R17 16 [assert]
CALL R17 1 0
L324: MOVE R11 R15
L325: FORGLOOP R12 L321 1
REMARK builtin assert/1
  233: assert(a==6)
JUMPXEQKN R11 K279 L326 [6]
LOADB R13 0 +1
L326: LOADB R13 1
L327: FASTCALL1 1 R13 L328
GETIMPORT R12 16 [assert]
CALL R12 1 0
REMARK allocation: table template 1
  235: t = {n=0}
L328: DUPTABLE R12 233
LOADN R13 0
SETTABLEKS R13 R12 K230 ['n']
MOVE R8 R12
  236: for w in string.gmatch("first second word", "%w+") do
GETIMPORT R12 276 [string.gmatch]
LOADK R13 K234 ['first second word']
LOADK R14 K185 ['%w+']
CALL R12 2 3
FORGPREP R12 L330
  237:       t.n=t.n+1; t[t.n] = w
L329: GETTABLEKS R18 R8 K230 ['n']
ADDK R17 R18 K13 [1]
SETTABLEKS R17 R8 K230 ['n']
GETTABLEKS R17 R8 K230 ['n']
SETTABLE R15 R8 R17
  236: for w in string.gmatch("first second word", "%w+") do
L330: FORGLOOP R12 L329 1
REMARK builtin assert/1
  239: assert(t[1] == "first" and t[2] == "second" and t[3] == "word")
LOADB R13 0
GETTABLEN R14 R8 1
JUMPXEQKS R14 K236 L332 NOT ['first']
LOADB R13 0
GETTABLEN R14 R8 2
JUMPXEQKS R14 K237 L332 NOT ['second']
GETTABLEN R14 R8 3
JUMPXEQKS R14 K238 L331 ['word']
LOADB R13 0 +1
L331: LOADB R13 1
L332: FASTCALL1 1 R13 L333
GETIMPORT R12 16 [assert]
CALL R12 1 0
REMARK allocation: table array 3
  241: t = {3, 6, 9}
L333: NEWTABLE R12 0 3
LOADN R13 3
LOADN R14 6
LOADN R15 9
SETLIST R12 R13 3 [1]
MOVE R8 R12
  242: for i in string.gmatch ("xuxx uu ppar r", "()(.)%2") do
GETIMPORT R12 276 [string.gmatch]
LOADK R13 K280 ['xuxx uu ppar r']
LOADK R14 K281 ['()(.)%2']
CALL R12 2 3
FORGPREP R12 L337
REMARK builtin assert/1
  243:   assert(i == table.remove(t, 1))
L334: GETIMPORT R19 284 [table.remove]
MOVE R20 R8
LOADN R21 1
CALL R19 2 1
JUMPIFEQ R15 R19 L335
LOADB R18 0 +1
L335: LOADB R18 1
L336: FASTCALL1 1 R18 L337
GETIMPORT R17 16 [assert]
CALL R17 1 0
  242: for i in string.gmatch ("xuxx uu ppar r", "()(.)%2") do
L337: FORGLOOP R12 L334 1
REMARK builtin assert/1
  245: assert(table.getn(t) == 0)
GETIMPORT R14 286 [table.getn]
MOVE R15 R8
CALL R14 1 1
JUMPXEQKN R14 K14 L338 [0]
LOADB R13 0 +1
L338: LOADB R13 1
L339: FASTCALL1 1 R13 L340
GETIMPORT R12 16 [assert]
CALL R12 1 0
REMARK allocation: table hash 0
  247: t = {}
L340: NEWTABLE R8 0 0
  248: for i,j in string.gmatch("13 14 10 = 11, 15= 16, 22=23", "(%d+)%s*=%s*(%d+)") do
GETIMPORT R12 276 [string.gmatch]
LOADK R13 K287 ['13 14 10 = 11, 15= 16, 22=23']
LOADK R14 K288 ['(%d+)%s*=%s*(%d+)']
CALL R12 2 3
FORGPREP R12 L342
  249:   t[i] = j
L341: SETTABLE R16 R8 R15
  248: for i,j in string.gmatch("13 14 10 = 11, 15= 16, 22=23", "(%d+)%s*=%s*(%d+)") do
L342: FORGLOOP R12 L341 2
  251: a = 0
LOADN R11 0
  252: for k,v in pairs(t) do assert(k+1 == v+0); a=a+1 end
GETIMPORT R12 290 [pairs]
MOVE R13 R8
CALL R12 1 3
FORGPREP_NEXT R12 L347
REMARK builtin assert/1
L343: ADDK R19 R15 K13 [1]
ADDK R20 R16 K14 [0]
JUMPIFEQ R19 R20 L344
LOADB R18 0 +1
L344: LOADB R18 1
L345: FASTCALL1 1 R18 L346
GETIMPORT R17 16 [assert]
CALL R17 1 0
L346: ADDK R11 R11 K13 [1]
L347: FORGLOOP R12 L343 2
REMARK builtin assert/1
  253: assert(a == 3)
JUMPXEQKN R11 K218 L348 [3]
LOADB R13 0 +1
L348: LOADB R13 1
L349: FASTCALL1 1 R13 L350
GETIMPORT R12 16 [assert]
CALL R12 1 0
REMARK builtin assert/1
  258: assert(string.gsub("aaa aa a aaa a", "%f[%w]a", "x") == "xaa xa x xaa x")
L350: GETIMPORT R14 151 [string.gsub]
LOADK R15 K291 ['aaa aa a aaa a']
LOADK R16 K292 ['%f[%w]a']
LOADK R17 K154 ['x']
CALL R14 3 1
JUMPXEQKS R14 K293 L351 ['xaa xa x xaa x']
LOADB R13 0 +1
L351: LOADB R13 1
L352: FASTCALL1 1 R13 L353
GETIMPORT R12 16 [assert]
CALL R12 1 0
REMARK builtin assert/1
  259: assert(string.gsub("[[]] [][] [[[[", "%f[[].", "x") == "x[]] x]x] x[[[")
L353: GETIMPORT R14 151 [string.gsub]
LOADK R15 K294 ['[[]] [][] [[[[']
LOADK R16 K295 ['%f[[].']
LOADK R17 K154 ['x']
CALL R14 3 1
JUMPXEQKS R14 K296 L354 ['x[]] x]x] x[[[']
LOADB R13 0 +1
L354: LOADB R13 1
L355: FASTCALL1 1 R13 L356
GETIMPORT R12 16 [assert]
CALL R12 1 0
REMARK builtin assert/1
  260: assert(string.gsub("01abc45de3", "%f[%d]", ".") == ".01abc.45de.3")
L356: GETIMPORT R14 151 [string.gsub]
LOADK R15 K297 ['01abc45de3']
LOADK R16 K298 ['%f[%d]']
LOADK R17 K132 ['.']
CALL R14 3 1
JUMPXEQKS R14 K299 L357 ['.01abc.45de.3']
LOADB R13 0 +1
L357: LOADB R13 1
L358: FASTCALL1 1 R13 L359
GETIMPORT R12 16 [assert]
CALL R12 1 0
REMARK builtin assert/1
  261: assert(string.gsub("01abc45 de3x", "%f[%D]%w", ".") == "01.bc45 de3.")
L359: GETIMPORT R14 151 [string.gsub]
LOADK R15 K300 ['01abc45 de3x']
LOADK R16 K301 ['%f[%D]%w']
LOADK R17 K132 ['.']
CALL R14 3 1
JUMPXEQKS R14 K302 L360 ['01.bc45 de3.']
LOADB R13 0 +1
L360: LOADB R13 1
L361: FASTCALL1 1 R13 L362
GETIMPORT R12 16 [assert]
CALL R12 1 0
REMARK builtin assert/1
  262: assert(string.gsub("function", "%f[\1-\255]%w", ".") == ".unction")
L362: GETIMPORT R14 151 [string.gsub]
LOADK R15 K303 ['function']
LOADK R16 K304 []
LOADK R17 K132 ['.']
CALL R14 3 1
JUMPXEQKS R14 K305 L363 ['.unction']
LOADB R13 0 +1
L363: LOADB R13 1
L364: FASTCALL1 1 R13 L365
GETIMPORT R12 16 [assert]
CALL R12 1 0
REMARK builtin assert/1
  263: assert(string.gsub("function", "%f[^\1-\255]", ".") == "function.")
L365: GETIMPORT R14 151 [string.gsub]
LOADK R15 K303 ['function']
LOADK R16 K306 []
LOADK R17 K132 ['.']
CALL R14 3 1
JUMPXEQKS R14 K307 L366 ['function.']
LOADB R13 0 +1
L366: LOADB R13 1
L367: FASTCALL1 1 R13 L368
GETIMPORT R12 16 [assert]
CALL R12 1 0
REMARK builtin assert/1
  265: assert(string.find("a", "%f[a]") == 1)
L368: GETIMPORT R14 9 [string.find]
LOADK R15 K11 ['a']
LOADK R16 K308 ['%f[a]']
CALL R14 2 1
JUMPXEQKN R14 K13 L369 [1]
LOADB R13 0 +1
L369: LOADB R13 1
L370: FASTCALL1 1 R13 L371
GETIMPORT R12 16 [assert]
CALL R12 1 0
REMARK builtin assert/1
  266: assert(string.find("a", "%f[^%z]") == 1)
L371: GETIMPORT R14 9 [string.find]
LOADK R15 K11 ['a']
LOADK R16 K309 ['%f[^%z]']
CALL R14 2 1
JUMPXEQKN R14 K13 L372 [1]
LOADB R13 0 +1
L372: LOADB R13 1
L373: FASTCALL1 1 R13 L374
GETIMPORT R12 16 [assert]
CALL R12 1 0
REMARK builtin assert/1
  267: assert(string.find("a", "%f[^%l]") == 2)
L374: GETIMPORT R14 9 [string.find]
LOADK R15 K11 ['a']
LOADK R16 K310 ['%f[^%l]']
CALL R14 2 1
JUMPXEQKN R14 K174 L375 [2]
LOADB R13 0 +1
L375: LOADB R13 1
L376: FASTCALL1 1 R13 L377
GETIMPORT R12 16 [assert]
CALL R12 1 0
REMARK builtin assert/1
  268: assert(string.find("aba", "%f[a%z]") == 3)
L377: GETIMPORT R14 9 [string.find]
LOADK R15 K47 ['aba']
LOADK R16 K311 ['%f[a%z]']
CALL R14 2 1
JUMPXEQKN R14 K218 L378 [3]
LOADB R13 0 +1
L378: LOADB R13 1
L379: FASTCALL1 1 R13 L380
GETIMPORT R12 16 [assert]
CALL R12 1 0
REMARK builtin assert/1
  269: assert(string.find("aba", "%f[%z]") == 4)
L380: GETIMPORT R14 9 [string.find]
LOADK R15 K47 ['aba']
LOADK R16 K312 ['%f[%z]']
CALL R14 2 1
JUMPXEQKN R14 K30 L381 [4]
LOADB R13 0 +1
L381: LOADB R13 1
L382: FASTCALL1 1 R13 L383
GETIMPORT R12 16 [assert]
CALL R12 1 0
REMARK builtin assert/1
  270: assert(not string.find("aba", "%f[%l%z]"))
L383: GETIMPORT R14 9 [string.find]
LOADK R15 K47 ['aba']
LOADK R16 K313 ['%f[%l%z]']
CALL R14 2 1
NOT R13 R14
FASTCALL1 1 R13 L384
GETIMPORT R12 16 [assert]
CALL R12 1 0
REMARK builtin assert/1
  271: assert(not string.find("aba", "%f[^%l%z]"))
L384: GETIMPORT R14 9 [string.find]
LOADK R15 K47 ['aba']
LOADK R16 K314 ['%f[^%l%z]']
CALL R14 2 1
NOT R13 R14
FASTCALL1 1 R13 L385
GETIMPORT R12 16 [assert]
CALL R12 1 0
  273: local i, e = string.find(" alo aalo allo", "%f[%S].-%f[%s].-%f[%S]")
L385: GETIMPORT R12 9 [string.find]
LOADK R13 K315 [' alo aalo allo']
LOADK R14 K316 ['%f[%S].-%f[%s].-%f[%S]']
CALL R12 2 2
REMARK builtin assert/1
  274: assert(i == 2 and e == 5)
LOADB R15 0
JUMPXEQKN R12 K174 L387 NOT [2]
JUMPXEQKN R13 K20 L386 [5]
LOADB R15 0 +1
L386: LOADB R15 1
L387: FASTCALL1 1 R15 L388
GETIMPORT R14 16 [assert]
CALL R14 1 0
  275: local k = string.match(" alo aalo allo", "%f[%S](.-%f[%s].-%f[%S])")
L388: GETIMPORT R14 104 [string.match]
LOADK R15 K315 [' alo aalo allo']
LOADK R16 K317 ['%f[%S](.-%f[%s].-%f[%S])']
CALL R14 2 1
REMARK builtin assert/1
  276: assert(k == 'alo ')
JUMPXEQKS R14 K139 L389 ['alo ']
LOADB R16 0 +1
L389: LOADB R16 1
L390: FASTCALL1 1 R16 L391
GETIMPORT R15 16 [assert]
CALL R15 1 0
REMARK allocation: table array 5
  278: local a = {1, 5, 9, 14, 17,}
L391: NEWTABLE R15 0 5
LOADN R16 1
LOADN R17 5
LOADN R18 9
LOADN R19 14
LOADN R20 17
SETLIST R15 R16 5 [1]
  279: for k in string.gmatch("alo alo th02 is 1hat", "()%f[%w%d]") do
GETIMPORT R16 276 [string.gmatch]
LOADK R17 K318 ['alo alo th02 is 1hat']
LOADK R18 K319 ['()%f[%w%d]']
CALL R16 2 3
FORGPREP R16 L395
REMARK builtin assert/1
  280:   assert(table.remove(a, 1) == k)
L392: GETIMPORT R23 284 [table.remove]
MOVE R24 R15
LOADN R25 1
CALL R23 2 1
JUMPIFEQ R23 R19 L393
LOADB R22 0 +1
L393: LOADB R22 1
L394: FASTCALL1 1 R22 L395
GETIMPORT R21 16 [assert]
CALL R21 1 0
  279: for k in string.gmatch("alo alo th02 is 1hat", "()%f[%w%d]") do
L395: FORGLOOP R16 L392 1
REMARK builtin assert/1
  282: assert(#a == 0)
LENGTH R18 R15
JUMPXEQKN R18 K14 L396 [0]
LOADB R17 0 +1
L396: LOADB R17 1
L397: FASTCALL1 1 R17 L398
GETIMPORT R16 16 [assert]
CALL R16 1 0
  286: local function malform (p, m)
L398: DUPCLOSURE R16 K320 ['malform']
  292: malform("(.", "unfinished capture")
MOVE R17 R16
LOADK R18 K241 ['(.']
LOADK R19 K321 ['unfinished capture']
CALL R17 2 0
  293: malform(".)", "invalid pattern capture")
MOVE R17 R16
LOADK R18 K242 ['.)']
LOADK R19 K322 ['invalid pattern capture']
CALL R17 2 0
  294: malform("[a")
MOVE R17 R16
LOADK R18 K323 ['[a']
CALL R17 1 0
  295: malform("[]")
MOVE R17 R16
LOADK R18 K324 ['[]']
CALL R17 1 0
  296: malform("[^]")
MOVE R17 R16
LOADK R18 K325 ['[^]']
CALL R17 1 0
  297: malform("[a%]")
MOVE R17 R16
LOADK R18 K326 ['[a%]']
CALL R17 1 0
  298: malform("[a%")
MOVE R17 R16
LOADK R18 K327 ['[a%']
CALL R17 1 0
  299: malform("%b")
MOVE R17 R16
LOADK R18 K328 ['%b']
CALL R17 1 0
  300: malform("%ba")
MOVE R17 R16
LOADK R18 K329 ['%ba']
CALL R17 1 0
  301: malform("%")
MOVE R17 R16
LOADK R18 K330 ['%']
CALL R17 1 0
  302: malform("%f", "missing")
MOVE R17 R16
LOADK R18 K331 ['%f']
LOADK R19 K332 ['missing']
CALL R17 2 0
REMARK builtin assert/1
  305: assert(string.match("ab\0\1\2c", "[\0-\2]+") == "\0\1\2")
GETIMPORT R19 104 [string.match]
LOADK R20 K333 []
LOADK R21 K334 []
CALL R19 2 1
JUMPXEQKS R19 K335 L399 []
LOADB R18 0 +1
L399: LOADB R18 1
L400: FASTCALL1 1 R18 L401
GETIMPORT R17 16 [assert]
CALL R17 1 0
REMARK builtin assert/1
  306: assert(string.match("ab\0\1\2c", "[\0-\0]+") == "\0")
L401: GETIMPORT R19 104 [string.match]
LOADK R20 K333 []
LOADK R21 K336 []
CALL R19 2 1
JUMPXEQKS R19 K27 L402 []
LOADB R18 0 +1
L402: LOADB R18 1
L403: FASTCALL1 1 R18 L404
GETIMPORT R17 16 [assert]
CALL R17 1 0
REMARK builtin assert/1
  307: assert(string.find("b$a", "$\0?") == 2)
L404: GETIMPORT R19 9 [string.find]
LOADK R20 K337 ['b$a']
LOADK R21 K338 []
CALL R19 2 1
JUMPXEQKN R19 K174 L405 [2]
LOADB R18 0 +1
L405: LOADB R18 1
L406: FASTCALL1 1 R18 L407
GETIMPORT R17 16 [assert]
CALL R17 1 0
REMARK builtin assert/1
  308: assert(string.find("abc\0efg", "%\0") == 4)
L407: GETIMPORT R19 9 [string.find]
LOADK R20 K339 []
LOADK R21 K340 []
CALL R19 2 1
JUMPXEQKN R19 K30 L408 [4]
LOADB R18 0 +1
L408: LOADB R18 1
L409: FASTCALL1 1 R18 L410
GETIMPORT R17 16 [assert]
CALL R17 1 0
REMARK builtin assert/1
  309: assert(string.match("abc\0efg\0\1e\1g", "%b\0\1") == "\0efg\0\1e\1")
L410: GETIMPORT R19 104 [string.match]
LOADK R20 K341 []
LOADK R21 K342 []
CALL R19 2 1
JUMPXEQKS R19 K343 L411 []
LOADB R18 0 +1
L411: LOADB R18 1
L412: FASTCALL1 1 R18 L413
GETIMPORT R17 16 [assert]
CALL R17 1 0
REMARK builtin assert/1
  310: assert(string.match("abc\0\0\0", "%\0+") == "\0\0\0")
L413: GETIMPORT R19 104 [string.match]
LOADK R20 K344 []
LOADK R21 K345 []
CALL R19 2 1
JUMPXEQKS R19 K346 L414 []
LOADB R18 0 +1
L414: LOADB R18 1
L415: FASTCALL1 1 R18 L416
GETIMPORT R17 16 [assert]
CALL R17 1 0
REMARK builtin assert/1
  311: assert(string.match("abc\0\0\0", "%\0%\0?") == "\0\0")
L416: GETIMPORT R19 104 [string.match]
LOADK R20 K344 []
LOADK R21 K347 []
CALL R19 2 1
JUMPXEQKS R19 K348 L417 []
LOADB R18 0 +1
L417: LOADB R18 1
L418: FASTCALL1 1 R18 L419
GETIMPORT R17 16 [assert]
CALL R17 1 0
REMARK builtin assert/1
  314: assert(string.find("abc\0\0","\0.") == 4)
L419: GETIMPORT R19 9 [string.find]
LOADK R20 K349 []
LOADK R21 K350 []
CALL R19 2 1
JUMPXEQKN R19 K30 L420 [4]
LOADB R18 0 +1
L420: LOADB R18 1
L421: FASTCALL1 1 R18 L422
GETIMPORT R17 16 [assert]
CALL R17 1 0
REMARK builtin assert/1
  315: assert(string.find("abcx\0\0abc\0abc","x\0\0abc\0a.") == 4)
L422: GETIMPORT R19 9 [string.find]
LOADK R20 K351 []
LOADK R21 K352 []
CALL R19 2 1
JUMPXEQKN R19 K30 L423 [4]
LOADB R18 0 +1
L423: LOADB R18 1
L424: FASTCALL1 1 R18 L425
GETIMPORT R17 16 [assert]
CALL R17 1 0
  317: print('OK')
L425: GETIMPORT R17 1 [print]
LOADK R18 K353 ['OK']
CALL R17 1 0
  318: 
CLOSEUPVALS R8
RETURN R0 0

]]
end