-- file was auto-generated by `fiu-tests`
--!ctx Luau

local ok, compileResult = Luau.compile([[
-- tests: LOP_LOADNIL, LOP_LOADK, LOP_LOADN, LOP_LOADB, LOP_NEWTABLE, LOP_NEWCLOSURE/LOP_DUPCLOSURE

-- LOADNIL
local n = nil
-- LOADK
local string = "STRING"
-- LOADN
local number = 123
-- LOADB
local boolean = true
-- NEWTABLE
local table = {1, 2, 3}
-- NEWCLOSURE/DUPCLOSURE
local function func() end
-- extra uncontrolled datatypes
local userdata = newproxy(true)
local thread = coroutine.create(func)

-- assert types
assert(type(n) == "nil")
assert(type(string) == "string" and string == "STRING")
assert(type(number) == "number" and number == 123)
assert(type(boolean) == "boolean" and boolean == true)
assert(type(table) == "table" and #table == 3 and table[1] == 1 and table[2] == 2 and table[3] == 3)
assert(type(func) == "function")
assert(type(userdata) == "userdata")
assert(type(thread) == "thread")

OK()
]], {
	optimizationLevel = 2,
	debugLevel = 2,
	coverageLevel = 0,
	vectorLib = nil,
	vectorCtor = nil,
	vectorType = nil
})

if not ok then
	error(`Failed to compile, error: {compileResult}`)
end

local encodedModule, constantList, stringList = [[
1; 2; 0 0 0 0 0 14 1 1 0 0 [] {
	22 2 0 ? 0 1 ? ? ? ? ? ? ? ? ? ?
}
1 12 0 0 1 1 ? 113 20 1 [1,] {
	65 1 0 ? 0 ? ? ? ? ? ? ? ? ? ? ?; 2 1 0 ? 0 ? ? ? ? ? ? ? ? ? ? ?; 5 4 3 ? 1 ? ? 0 ? 1 ? ? ? ? ? ?; 4 4 0 ? 2 ? ? 123 ? ? ? ? ? ? ? ?
	3 3 0 ? 3 1 0 ? ? ? ? ? ? ? ? ?; 53 2 0 3 4 0 ? ? ? ? ? ? ? ? ? 1; ~ 3; 4 4 0 ? 5 ? ? 1 ? ? ? ? ? ? ? ?
	4 4 0 ? 6 ? ? 2 ? ? ? ? ? ? ? ?; 4 4 0 ? 7 ? ? 3 ? ? ? ? ? ? ? ?; 55 3 0 1 4 5 4 ? ? ? ? ? ? ? ? 1; ~ 1
	64 4 3 ? 5 ? ? 1 ? 2 ? ? ? ? ? ?; 12 4 4 1075838976 6 ? ? 3 ? ? 3 ? ? ? 1 1; ~ 1075838976; 3 3 0 ? 7 1 0 ? ? ? ? ? ? ? ? ?
	21 3 0 ? 6 2 2 ? ? ? ? ? ? ? ? ?; 12 4 4 2151683072 7 ? ? 6 ? ? 5 6 ? ? 2 1; ~ 2151683072; 6 2 0 ? 8 5 ? ? ? ? ? ? ? ? ? ?
	21 3 0 ? 7 2 2 ? ? ? ? ? ? ? ? ?; 3 3 0 ? 9 1 0 ? ? ? ? ? ? ? ? ?; 73 3 0 ? 1 9 2 ? ? ? ? ? ? ? ? ?; 12 4 4 1081081856 8 ? ? 8 ? ? 8 ? ? ? 1 1
	~ 1081081856; 21 3 0 ? 8 2 1 ? ? ? ? ? ? ? ? ?; 3 3 0 ? 9 1 0 ? ? ? ? ? ? ? ? ?; 73 3 0 ? 1 9 2 ? ? ? ? ? ? ? ? ?
	12 4 4 1081081856 8 ? ? 8 ? ? 8 ? ? ? 1 1; ~ 1081081856; 21 3 0 ? 8 2 1 ? ? ? ? ? ? ? ? ?; 3 3 0 ? 9 1 0 ? ? ? ? ? ? ? ? ?
	73 3 0 ? 1 9 2 ? ? ? ? ? ? ? ? ?; 12 4 4 1081081856 8 ? ? 8 ? ? 8 ? ? ? 1 1; ~ 1081081856; 21 3 0 ? 8 2 1 ? ? ? ? ? ? ? ? ?
	3 3 0 ? 9 1 0 ? ? ? ? ? ? ? ? ?; 73 3 0 ? 1 9 2 ? ? ? ? ? ? ? ? ?; 12 4 4 1081081856 8 ? ? 8 ? ? 8 ? ? ? 1 1; ~ 1081081856
	21 3 0 ? 8 2 1 ? ? ? ? ? ? ? ? ?; 3 3 0 ? 9 0 0 ? ? ? ? ? ? ? ? ?; 73 3 0 ? 40 4 3 ? ? ? ? ? ? ? ? ?; 6 2 0 ? 11 4 ? ? ? ? ? ? ? ? ? ?
	12 4 4 1083179008 10 ? ? 10 ? ? 10 ? ? ? 1 1; ~ 1083179008; 21 3 0 ? 10 2 2 ? ? ? ? ? ? ? ? ?; 80 4 6 2147483659 10 ? ? 18 ? 12 ? ? ? 1 ? 1
	~ 2147483659; 3 3 0 ? 9 0 0 ? ? ? ? ? ? ? ? ?; 52 2 0 ? 10 4 ? ? ? ? ? ? ? ? ? ?; 79 4 6 2147483660 10 ? ? 14 ? 13 ? ? ? 1 ? 1
	~ 2147483660; 3 3 0 ? 9 0 0 ? ? ? ? ? ? ? ? ?; 17 3 0 ? 10 4 0 ? ? ? ? ? ? ? ? ?; 79 4 6 2147483661 10 ? ? 10 ? 14 ? ? ? 1 ? 1
	~ 2147483661; 3 3 0 ? 9 0 0 ? ? ? ? ? ? ? ? ?; 17 3 0 ? 10 4 1 ? ? ? ? ? ? ? ? ?; 79 4 6 2147483662 10 ? ? 6 ? 15 ? ? ? 1 ? 1
	~ 2147483662; 17 3 0 ? 10 4 2 ? ? ? ? ? ? ? ? ?; 79 4 6 12 10 ? ? 2 ? 13 ? ? ? 0 ? 1; ~ 12
	3 3 0 ? 9 0 1 ? ? ? ? ? ? ? ? ?; 3 3 0 ? 9 1 0 ? ? ? ? ? ? ? ? ?; 73 3 0 ? 1 9 2 ? ? ? ? ? ? ? ? ?; 12 4 4 1081081856 8 ? ? 8 ? ? 8 ? ? ? 1 1
	~ 1081081856; 21 3 0 ? 8 2 1 ? ? ? ? ? ? ? ? ?; 73 3 0 ? 40 5 3 ? ? ? ? ? ? ? ? ?; 6 2 0 ? 11 5 ? ? ? ? ? ? ? ? ? ?
	12 4 4 1083179008 10 ? ? 10 ? ? 10 ? ? ? 1 1; ~ 1083179008; 21 3 0 ? 10 2 2 ? ? ? ? ? ? ? ? ?; 80 4 6 15 10 ? ? 2 ? 16 ? ? ? 0 ? 1
	~ 15; 3 3 0 ? 9 0 1 ? ? ? ? ? ? ? ? ?; 3 3 0 ? 9 1 0 ? ? ? ? ? ? ? ? ?; 73 3 0 ? 1 9 2 ? ? ? ? ? ? ? ? ?
	12 4 4 1081081856 8 ? ? 8 ? ? 8 ? ? ? 1 1; ~ 1081081856; 21 3 0 ? 8 2 1 ? ? ? ? ? ? ? ? ?; 73 3 0 ? 40 6 3 ? ? ? ? ? ? ? ? ?
	6 2 0 ? 11 6 ? ? ? ? ? ? ? ? ? ?; 12 4 4 1083179008 10 ? ? 10 ? ? 10 ? ? ? 1 1; ~ 1083179008; 21 3 0 ? 10 2 2 ? ? ? ? ? ? ? ? ?
	80 4 6 16 10 ? ? 2 ? 17 ? ? ? 0 ? 1; ~ 16; 3 3 0 ? 9 0 1 ? ? ? ? ? ? ? ? ?; 3 3 0 ? 9 1 0 ? ? ? ? ? ? ? ? ?
	73 3 0 ? 1 9 2 ? ? ? ? ? ? ? ? ?; 12 4 4 1081081856 8 ? ? 8 ? ? 8 ? ? ? 1 1; ~ 1081081856; 21 3 0 ? 8 2 1 ? ? ? ? ? ? ? ? ?
	73 3 0 ? 40 7 3 ? ? ? ? ? ? ? ? ?; 6 2 0 ? 11 7 ? ? ? ? ? ? ? ? ? ?; 12 4 4 1083179008 10 ? ? 10 ? ? 10 ? ? ? 1 1; ~ 1083179008
	21 3 0 ? 10 2 2 ? ? ? ? ? ? ? ? ?; 80 4 6 17 10 ? ? 2 ? 18 ? ? ? 0 ? 1; ~ 17; 3 3 0 ? 9 0 1 ? ? ? ? ? ? ? ? ?
	3 3 0 ? 9 1 0 ? ? ? ? ? ? ? ? ?; 73 3 0 ? 1 9 2 ? ? ? ? ? ? ? ? ?; 12 4 4 1081081856 8 ? ? 8 ? ? 8 ? ? ? 1 1; ~ 1081081856
	21 3 0 ? 8 2 1 ? ? ? ? ? ? ? ? ?; 12 4 4 1092616192 8 ? ? 19 ? ? 19 ? ? ? 1 1; ~ 1092616192; 21 3 0 ? 8 1 1 ? ? ? ? ? ? ? ? ?
	22 2 0 ? 0 1 ? ? ? ? ? ? ? ? ? ?
}]], {
	{ },{ "2",0,"3",1075838976,"4","5",2151683072,"6",1081081856,
		"7",1083179008,"8",3,1,2,"9","10","11","12",1092616192,
	},
}, {
	"\102\117\110\99","\83\84\82\73\78\71","\110\101\119\112\114\111\120\121","\99\111\114\111\117\116\105\110\101",
	"\99\114\101\97\116\101","\97\115\115\101\114\116","\116\121\112\101","\116\97\98\108\101","\102\117\110\99\116\105\111\110",
	"\117\115\101\114\100\97\116\97","\116\104\114\101\97\100","\79\75","\110","\115\116\114\105\110\103","\110\117\109\98\101\114",
	"\98\111\111\108\101\97\110",
}

assert(MATCH(
	Fiu.luau_deserialize(compileResult),
	FiuUtils.decodeModule(encodedModule, constantList, stringList)
))

OK()
